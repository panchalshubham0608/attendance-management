(this["webpackJsonpattendance-management"]=this["webpackJsonpattendance-management"]||[]).push([[0],{255:function(e,t,a){},290:function(e,t){},292:function(e,t){},303:function(e,t){},305:function(e,t){},332:function(e,t){},334:function(e,t){},335:function(e,t){},340:function(e,t){},342:function(e,t){},361:function(e,t){},373:function(e,t){},376:function(e,t){},403:function(e,t,a){},404:function(e,t,a){"use strict";a.r(t);var n=a(2),r=a(0),c=a.n(r),s=a(14),i=a.n(s),o=(a(255),a(26)),l=a(147),d=a(18),u=a(75),j=a(13),b=a(443),m=a(446),h=a.p+"static/media/brand.2d6d0d51.png",g=Object(b.a)((function(e){return{homepage:{userSelect:"none"},header:{textAlign:"center",color:"#2977c9"},content:{display:"flex",alignItems:"center"},leftFlexBox:{flex:.5,textAlign:"center",marginRight:"10px"},rightFlexBox:{flex:.5,textAlign:"left",marginLeft:"10px"},brandImage:{borderRadius:"50%",width:"200px",height:"200px"},button:{margin:"auto 10px"}}}));var p=function(e){var t=g(),a=Object(r.useState)(null),c=Object(j.a)(a,2),s=c[0],i=c[1];return s||Object(n.jsxs)("div",{className:t.homepage,children:[Object(n.jsx)("h1",{className:t.header,children:"Attendance Management System"}),Object(n.jsxs)("div",{className:t.content,children:[Object(n.jsx)("div",{className:t.leftFlexBox,children:Object(n.jsx)("img",{src:h,alt:"our-brand",className:t.brandImage})}),Object(n.jsxs)("div",{className:t.rightFlexBox,children:[Object(n.jsxs)("p",{children:["- One place to manage all your attendances! ",Object(n.jsx)("br",{}),"- Create and delete classrooms on-demand! ",Object(n.jsx)("br",{}),"- Collect attendance on-demand! ",Object(n.jsx)("br",{}),"- Maintain your attendance record with ease! ",Object(n.jsx)("br",{}),"- Export attendance-statistics of your classroom! ",Object(n.jsx)("br",{}),"- and many more features for free!"]}),Object(n.jsxs)("p",{children:["Sounds exciting? ",Object(n.jsx)("br",{}),"Click on the button below to get started!"]}),Object(n.jsx)(m.a,{className:t.button,variant:"contained",color:"primary",onClick:function(e){return i(Object(n.jsx)(d.c,{to:"/login"}))},children:"Sign In"}),"OR",Object(n.jsx)(m.a,{className:t.button,variant:"contained",color:"primary",onClick:function(e){return i(Object(n.jsx)(d.c,{to:"/register"}))},children:"Sign Up"})]})]})]})},x=a(481),f=a(449),O=a(478),v=a(457),y=a(81),k=a(458),w=a(96),S=a(448),C=a(475),P=a(482),I=a(454),N=a(77),T=a.n(N),M=a(474),A=a(451),B=a(450),F=a(56),L=a.n(F),_=a(22),W=a.n(_),E=a(113),z=a.n(E),R="e3483b2f6bc28d1f6c5253b1c8c860cbb7562341e75059c45108afdbe0fa92d0b152dc40ded35908921aa2e954f50830f157090b5a36319edef6901469f1afeb";W.a.defaults.baseURL="https://attendance-management-server.herokuapp.com";var D=function(e){return new Promise((function(t,a){W.a.get("/classroom/"+e).then((function(e){return t(e)})).catch((function(e){return a(e)}))}))},H=Object(b.a)((function(e){return{paper:{marginTop:e.spacing(0),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));function U(e){var t=e.register,a=H(),c=Object(r.useState)("student"),s=Object(j.a)(c,2),i=s[0],l=s[1],u=Object(r.useState)({loading:!1,text:""}),b=Object(j.a)(u,2),g=b[0],p=b[1],N=Object(r.useState)(null),F=Object(j.a)(N,2),_=F[0],E=F[1],D=Object(r.useState)(null),U=Object(j.a)(D,2),Y=U[0],J=U[1],q=Object(r.useState)(null),G=Object(j.a)(q,2),V=G[0],Z=G[1];return V||Object(n.jsx)("div",{id:"authForm",children:Object(n.jsx)(T.a,{active:g.loading,spinner:!0,text:g.text,children:Object(n.jsxs)(S.a,{component:"main",maxWidth:"xs",children:[Object(n.jsx)(f.a,{}),Object(n.jsxs)("div",{className:a.paper,children:[Object(n.jsx)(x.a,{className:a.avatar,src:h}),Object(n.jsx)(w.a,{component:"h1",variant:"h5",children:t?"Sign Up":"Sign In"}),Object(n.jsxs)("form",{className:a.form,noValidate:!0,onSubmit:function(e){if(e.preventDefault(),!g.loading){var a=null;t&&(a=String(document.getElementById("username").value).toLowerCase().trim());var r=String(document.getElementById("email").value).toLowerCase().trim(),c=String(document.getElementById("password").value).toLowerCase().trim();if(null==a||""!==a)if(function(e){return/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())}(r))if(""!==c)if("student"===i||"teacher"===i)if(t)p({loading:!0,text:"Please wait! I'm setting up your account"}),function(e){return new Promise((function(t,a){W.a.post("/register",Object(o.a)({},e)).then((function(e){return t(e)})).catch((function(e){return a(e)}))}))}({username:a,email:r,password:c,role:i}).then((function(e){var t=e.data;t.error?E(t.error):J("Your registration was successful!")})).catch((function(e){E(e)})).finally((function(){p({loading:!1,text:""})}));else p({loading:!0,text:"Please wait! I'm validating your credentials."}),function(e){return new Promise((function(t,a){W.a.post("/login",Object(o.a)({},e)).then((function(e){return t(e)})).catch((function(e){return a(e)}))}))}({email:r,password:c,role:i}).then((function(e){var t,a=e.data;a.error?E(a.error):(localStorage.setItem("_auth",(t=a.user._id,z.a.AES.encrypt(JSON.stringify(t),R))),J("You are successfully logged in!"),Z(Object(n.jsx)(d.c,{to:"/dashboard"})))})).catch((function(e){E(e)})).finally((function(){p({loading:!1,text:""})}));else E("Please select your role!");else E("Please provide a valid password!");else E("Please provide a valid email!");else E("Please provide a valid username!")}},children:[Object(n.jsxs)(B.a,{in:Boolean(Y||_),children:[Y&&Object(n.jsxs)(M.a,{severity:"success",action:Object(n.jsx)(A.a,{"aria-label":"close",color:"inherit",size:"small",onClick:function(){J(null),E(null)},children:Object(n.jsx)(L.a,{fontSize:"inherit"})}),children:[" ",String(Y)]}),_&&Object(n.jsxs)(M.a,{severity:"error",action:Object(n.jsx)(A.a,{"aria-label":"close",color:"inherit",size:"small",onClick:function(){J(null),E(null)},children:Object(n.jsx)(L.a,{fontSize:"inherit"})}),children:[" ",String(_)]})]}),t&&Object(n.jsx)(O.a,{variant:"outlined",margin:"normal",fullWidth:!0,id:"username",label:"Username",name:"username",autoComplete:"text",autoFocus:!0}),Object(n.jsx)(O.a,{variant:"outlined",margin:"normal",fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0}),Object(n.jsx)(O.a,{variant:"outlined",margin:"normal",fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password"}),Object(n.jsx)(I.a,{component:"fieldset",children:Object(n.jsxs)(P.a,{row:!0,"aria-label":"role",name:"role",value:i,onChange:function(e){return l(e.target.value)},children:[Object(n.jsx)(v.a,{value:"student",control:Object(n.jsx)(C.a,{}),label:"Student"}),Object(n.jsx)(v.a,{value:"teacher",control:Object(n.jsx)(C.a,{}),label:"Teacher"})]})}),Object(n.jsx)(m.a,{id:"submitButton",type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:a.submit,children:t?"Sign Up":"Sign In"}),Object(n.jsxs)(k.a,{container:!0,children:[Object(n.jsx)(k.a,{item:!0,xs:!0,children:!t&&Object(n.jsx)(y.HashLink,{to:"/forgot-password",variant:"body2",children:"Forgot password?"})}),Object(n.jsx)(k.a,{item:!0,children:Object(n.jsx)(y.HashLink,{to:t?"/login":"/register",variant:"body2",children:t?"Already have an account? Sign In":"Don't have an account? Sign Up"})})]}),Object(n.jsx)("d",{style:{height:"10px"}})]})]})]})})})}var Y=Object(b.a)((function(e){return{paper:{marginTop:e.spacing(0),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));function J(e){var t=e.reset,a=Y(),c=Object(r.useState)("student"),s=Object(j.a)(c,2),i=s[0],o=s[1],l=Object(r.useState)({loading:!1,text:""}),d=Object(j.a)(l,2),u=d[0],b=d[1],g=Object(r.useState)(null),p=Object(j.a)(g,2),N=p[0],F=p[1],_=Object(r.useState)(null),E=Object(j.a)(_,2),z=E[0],R=E[1];return Object(n.jsx)("div",{id:"forgotPasswordForm",children:Object(n.jsx)(T.a,{active:u.loading,spinner:!0,text:u.text,children:Object(n.jsxs)(S.a,{component:"main",maxWidth:"xs",children:[Object(n.jsx)(f.a,{}),Object(n.jsxs)("div",{className:a.paper,children:[Object(n.jsx)(x.a,{className:a.avatar,src:h}),Object(n.jsx)(w.a,{component:"h1",variant:"h5",children:t?"Reset Password":"Forgot Password"}),Object(n.jsxs)("form",{className:a.form,noValidate:!0,onSubmit:function(a){if(a.preventDefault(),!u.loading)if(t){var n=String(document.getElementById("password").value).trim();if(""===n)return void F("Please provide a valid password");var r=e.match.params.tokenId;b({loading:!0,text:"Please wait! I'm processing your request!"}),function(e,t){return new Promise((function(a,n){W.a.post("/reset-password",{tokenId:e,password:t}).then((function(e){return a(e)})).catch((function(e){return n(e)}))}))}(r,n).then((function(e){var t=e.data.error;t?F(t):R("Your password was successfully updated!")})).catch((function(e){F(e)})).finally((function(){b({loading:!1,text:""})}))}else{var c=document.getElementById("email").value;if(!function(e){return/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())}(c))return void F("Please provide a valid email!");b({loading:!0,text:"Please wait! I'm processing your request!"}),function(e,t){return new Promise((function(a,n){W.a.post("/forgot-password",{email:e,role:t}).then((function(e){return a(e)})).catch((function(e){return n(e)}))}))}(c,i).then((function(e){var t=e.data.error;t?F(t):R("An email has been sent to your email-address!")})).catch((function(e){F(e)})).finally((function(){b({loading:!1,text:""})}))}},children:[Object(n.jsxs)(B.a,{in:Boolean(z||N),children:[z&&Object(n.jsxs)(M.a,{severity:"success",action:Object(n.jsx)(A.a,{"aria-label":"close",color:"inherit",size:"small",onClick:function(){R(null),F(null)},children:Object(n.jsx)(L.a,{fontSize:"inherit"})}),children:[" ",String(z)]}),N&&Object(n.jsxs)(M.a,{severity:"error",action:Object(n.jsx)(A.a,{"aria-label":"close",color:"inherit",size:"small",onClick:function(){R(null),F(null)},children:Object(n.jsx)(L.a,{fontSize:"inherit"})}),children:[" ",String(N)]})]}),t&&Object(n.jsx)(O.a,{variant:"outlined",margin:"normal",fullWidth:!0,id:"password",label:"New Password",name:"password",type:"password",autoComplete:"password",autoFocus:!0}),!t&&Object(n.jsxs)("div",{children:[Object(n.jsx)(O.a,{variant:"outlined",margin:"normal",fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0}),Object(n.jsx)(I.a,{component:"fieldset",children:Object(n.jsxs)(P.a,{row:!0,"aria-label":"role",name:"role",value:i,onChange:function(e){return o(e.target.value)},children:[Object(n.jsx)(v.a,{value:"student",control:Object(n.jsx)(C.a,{}),label:"Student"}),Object(n.jsx)(v.a,{value:"teacher",control:Object(n.jsx)(C.a,{}),label:"Teacher"})]})})]}),Object(n.jsx)(m.a,{id:"submitButton",type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:a.submit,children:"Submit"}),!t&&Object(n.jsxs)(k.a,{container:!0,children:[Object(n.jsx)(k.a,{item:!0,xs:!0,children:Object(n.jsx)(y.HashLink,{to:"/login",variant:"body2",children:"Go to Sign In"})}),Object(n.jsx)(k.a,{item:!0,xs:!0,children:Object(n.jsx)(y.HashLink,{to:"/login",variant:"body2",children:"Go to Sign Up"})})]})]})]})]})})})}var q=a(106),G=a(4),V=a(479),Z=a(468),$=a(467),X=a(456),K=a(469),Q=a(220),ee=a.n(Q),te=a(221),ae=a.n(te),ne=a(222),re=a.n(ne),ce=a(472),se=a(226),ie=a.n(se),oe=a(466),le=a(470),de=a(471),ue=a(223),je=a.n(ue),be=a(224),me=a.n(be),he=a(225),ge=a.n(he),pe=a(480),xe=Object(b.a)((function(e){return{paper:{marginTop:e.spacing(0),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));function fe(e){var t=e.showSnackBar,a=e.onAddClassroom,r=e.role,c=xe(),s="teacher"===r,i=s?"classname":"classcode";return Object(n.jsx)("div",{id:"addClassroomForm",children:Object(n.jsxs)(S.a,{component:"main",maxWidth:"xs",children:[Object(n.jsx)(f.a,{}),Object(n.jsxs)("div",{className:c.paper,children:[Object(n.jsx)(x.a,{className:c.avatar,src:h}),Object(n.jsxs)(w.a,{component:"h1",variant:"h5",children:[s?"Create":"Join"," Classroom"]}),Object(n.jsxs)("form",{className:c.form,noValidate:!0,onSubmit:function(e){e.preventDefault();var n=String(document.getElementById(i).value).trim();0!==n.length?a(n):t("error","Please provide a valid classname")},autoComplete:"off",children:[Object(n.jsx)(O.a,{variant:"outlined",margin:"normal",fullWidth:!0,id:i,label:i,name:i,autoComplete:"off",autoFocus:!0}),Object(n.jsx)(m.a,{id:"submitButton",type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:c.submit,children:s?"Create":"Join"})]})]})]})})}var Oe=a(24),ve=a(461),ye=a(462),ke=a(464),we=a(460),Se=a(465),Ce=a(477),Pe=a(463),Ie=a(405),Ne=a(83),Te=a.n(Ne),Me=a(85),Ae=a.n(Me),Be=a(84),Fe=a.n(Be),Le=a(82),_e=a.n(Le),We=a(459),Ee=Object(b.a)((function(e){return{root:{flexShrink:0,marginLeft:e.spacing(2.5)}}}));function ze(e){var t=Ee(),a=Object(Oe.a)(),r=e.count,c=e.page,s=e.rowsPerPage,i=e.onChangePage;return Object(n.jsxs)("div",{className:t.root,children:[Object(n.jsx)(A.a,{onClick:function(e){i(e,0)},disabled:0===c,"aria-label":"first page",children:"rtl"===a.direction?Object(n.jsx)(_e.a,{}):Object(n.jsx)(Te.a,{})}),Object(n.jsx)(A.a,{onClick:function(e){i(e,c-1)},disabled:0===c,"aria-label":"previous page",children:"rtl"===a.direction?Object(n.jsx)(Fe.a,{}):Object(n.jsx)(Ae.a,{})}),Object(n.jsx)(A.a,{onClick:function(e){i(e,c+1)},disabled:c>=Math.ceil(r/s)-1,"aria-label":"next page",children:"rtl"===a.direction?Object(n.jsx)(Ae.a,{}):Object(n.jsx)(Fe.a,{})}),Object(n.jsx)(A.a,{onClick:function(e){i(e,Math.max(0,Math.ceil(r/s)-1))},disabled:c>=Math.ceil(r/s)-1,"aria-label":"last page",children:"rtl"===a.direction?Object(n.jsx)(Te.a,{}):Object(n.jsx)(_e.a,{})})]})}var Re=Object(b.a)((function(e){return{paper:{marginTop:e.spacing(0),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)},classroomPage:{padding:"10px",width:"80%",margin:"10px auto"},root:{flexShrink:0,marginLeft:e.spacing(2.5)},table:{minWidth:500}}}));function De(e){for(var t=e.user,a=e.classroomId,s=e.setLoader,i=e.setSnack,o=Re(),l=Object(r.useState)(null),d=Object(j.a)(l,2),u=d[0],b=d[1],h=Object(r.useState)([]),g=Object(j.a)(h,2),p=g[0],x=g[1],f=Object(r.useState)("Loading details of the classroom!"),O=Object(j.a)(f,2),v=O[0],y=O[1],k=[],w=0;w<p.length;++w){var S=p[w],C=S.attendanceId,P=null;P=-1===S.students.indexOf(t.email)?Object(n.jsx)(We.a,{color:"secondary",badgeContent:"Absent"}):Object(n.jsx)(We.a,{color:"primary",badgeContent:"Present"}),k.push({key:C,value:P})}var I=c.a.useState(0),N=Object(j.a)(I,2),T=N[0],M=N[1],A=c.a.useState(5),B=Object(j.a)(A,2),F=B[0],L=B[1],_=F-Math.min(F,k.length-T*F);Object(r.useEffect)((function(){s({loading:!0,text:"Please wait! I'm fetching details for this classroom"}),D(a).then((function(e){var t=e.data;t.error?(y("Failed to load details of this classroom!"),i({visible:!0,snackType:"error",snackMessage:t.error})):(b(t.classroom),x(t.records))})).catch((function(e){i({visible:!0,snackType:"error",snackMessage:e})})).finally((function(){s({loading:!1,text:""})}))}),[a,s,i]);for(var E=!1,z=0;z<p.length;++z)if(p[z].attendanceId===u.collectingFor){E=-1===p[z].students.indexOf(t.email);break}return null===u?Object(n.jsx)("div",{id:"classroomPage",className:o.classroomPage,children:v}):Object(n.jsxs)("div",{id:"classroomPage",className:o.classroomPage,children:[Object(n.jsxs)("div",{style:{textAlign:"center"},children:[Object(n.jsx)("strong",{children:"Classroom Name: "}),u.className]}),Object(n.jsxs)("div",{style:{textAlign:"center"},children:[Object(n.jsx)("strong",{children:"Classroom Code: "}),u.code]}),u.collectingFor&&E&&Object(n.jsxs)(m.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:o.submit,onClick:function(){s({loading:!0,text:"Please wait! I'm marking your attendance!"}),function(e,t){return new Promise((function(a,n){W.a.post("/mark-attendance",{userId:e,classroomId:t}).then((function(e){return a(e)})).catch((function(e){return n(e)}))}))}(t._id,u._id).then((function(e){var t=e.data;t.error?i({visible:!0,snackType:"error",snackMessage:t.error}):(b(t.classroom),x(t.records))})).catch((function(e){i({visible:!0,snackType:"error",snackMessage:e})})).finally((function(){s({loading:!1,text:""})}))},children:["Mark attedance for ",u.collectingFor]}),Object(n.jsxs)("div",{style:{textAlign:"center"},children:[Object(n.jsx)("br",{}),"Your attendance record for this classroom!"]}),Object(n.jsx)(we.a,{component:Ie.a,children:Object(n.jsx)(ve.a,{className:o.table,"aria-label":"custom pagination table",id:"attendanceRecordTable",children:Object(n.jsxs)(ye.a,{children:[(F>0?k.slice(T*F,T*F+F):k).map((function(e){return Object(n.jsxs)(Pe.a,{children:[Object(n.jsx)(ke.a,{component:"th",scope:"row",children:e.key}),Object(n.jsx)(ke.a,{align:"left",children:e.value})]},e.key)})),_>0&&Object(n.jsx)(Pe.a,{style:{height:53*_},children:Object(n.jsx)(ke.a,{colSpan:6})})]})})}),Object(n.jsx)(we.a,{children:Object(n.jsx)(ve.a,{children:Object(n.jsx)(Se.a,{children:Object(n.jsx)(Pe.a,{children:Object(n.jsx)(Ce.a,{rowsPerPageOptions:[5,10,25,{label:"All",value:-1}],colSpan:3,count:k.length,rowsPerPage:F,page:T,SelectProps:{inputProps:{"aria-label":"rows per page"},native:!0},onChangePage:function(e,t){M(t)},onChangeRowsPerPage:function(e){L(parseInt(e.target.value,10)),M(0)},ActionsComponent:ze})})})})})]})}var He=Object(b.a)((function(e){return{root:{flexShrink:0,marginLeft:e.spacing(2.5)}}}));function Ue(e){var t=He(),a=Object(Oe.a)(),r=e.count,c=e.page,s=e.rowsPerPage,i=e.onChangePage;return Object(n.jsxs)("div",{className:t.root,children:[Object(n.jsx)(A.a,{onClick:function(e){i(e,0)},disabled:0===c,"aria-label":"first page",children:"rtl"===a.direction?Object(n.jsx)(_e.a,{}):Object(n.jsx)(Te.a,{})}),Object(n.jsx)(A.a,{onClick:function(e){i(e,c-1)},disabled:0===c,"aria-label":"previous page",children:"rtl"===a.direction?Object(n.jsx)(Fe.a,{}):Object(n.jsx)(Ae.a,{})}),Object(n.jsx)(A.a,{onClick:function(e){i(e,c+1)},disabled:c>=Math.ceil(r/s)-1,"aria-label":"next page",children:"rtl"===a.direction?Object(n.jsx)(Ae.a,{}):Object(n.jsx)(Fe.a,{})}),Object(n.jsx)(A.a,{onClick:function(e){i(e,Math.max(0,Math.ceil(r/s)-1))},disabled:c>=Math.ceil(r/s)-1,"aria-label":"last page",children:"rtl"===a.direction?Object(n.jsx)(Te.a,{}):Object(n.jsx)(_e.a,{})})]})}var Ye=Object(b.a)((function(e){return{paper:{marginTop:e.spacing(0),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)},classroomPage:{padding:"10px",width:"80%",margin:"10px auto"},root:{flexShrink:0,marginLeft:e.spacing(2.5)},table:{minWidth:500}}}));function Je(e){var t=e.classroomId,a=e.loader,s=e.setLoader,i=e.setSnack,o=Ye(),l=Object(r.useState)(null),d=Object(j.a)(l,2),u=d[0],b=d[1],h=Object(r.useState)([]),g=Object(j.a)(h,2),p=g[0],x=g[1],f=Object(r.useState)("Loading details of the classroom!"),v=Object(j.a)(f,2),y=v[0],k=v[1],w=function(e,t){for(var a={backgroundColor:"#cff4fc",color:"#055160",padding:"5px",borderRadius:"5px"},r={backgroundColor:"#f8d7da",color:"#842029",padding:"5px",borderRadius:"5px"},c=[],s=["studentId"],i=0;i<t.length;++i)s.push(t[i].attendanceId);for(var o=[],l=0;l<s.length;++l)o.push(Object(n.jsx)(ke.a,{align:"left",children:Object(n.jsx)("strong",{children:s[l].toUpperCase()})},"head".concat(l)));if(c.push({key:"row_0",value:o}),null===e)return c;for(var d=e.studentOnce,u=0;u<d.length;++u){var j=d[u],b=[];b.push(Object(n.jsx)(ke.a,{align:"left",children:j},"cel_".concat(u,"_0")));for(var m=0;m<t.length;++m){var h=null;h=-1!==t[m].students.indexOf(j)?Object(n.jsx)("span",{style:a,children:"Present"}):Object(n.jsx)("span",{style:r,children:"Absent"}),b.push(Object(n.jsx)(ke.a,{align:"left",children:h},"cell_".concat(u,"_").concat(m+1)))}c.push({key:"row_".concat(u+1),value:b})}return c}(u,p),S=c.a.useState(0),C=Object(j.a)(S,2),P=C[0],I=C[1],N=c.a.useState(5),T=Object(j.a)(N,2),M=T[0],A=T[1],B=M-Math.min(M,w.length-P*M);Object(r.useEffect)((function(){s({loading:!0,text:"Please wait! I'm fetching details for this classroom"}),D(t).then((function(e){var t=e.data;t.error?(k("Failed to load details of this classroom!"),i({visible:!0,snackType:"error",snackMessage:t.error})):(b(t.classroom),x(t.records))})).catch((function(e){i({visible:!0,snackType:"error",snackMessage:e})})).finally((function(){s({loading:!1,text:""})}))}),[t,s,i]);return null===u?Object(n.jsx)("div",{id:"classroomPage",className:o.classroomPage,children:y}):Object(n.jsxs)("div",{id:"classroomPage",className:o.classroomPage,children:[Object(n.jsxs)("div",{style:{textAlign:"center"},children:[Object(n.jsx)("strong",{children:"Classroom Name: "}),u.className]}),Object(n.jsxs)("div",{style:{textAlign:"center"},children:[Object(n.jsx)("strong",{children:"Classroom Code: "}),u.code]}),u.collectingFor?Object(n.jsxs)(m.a,{type:"submit",fullWidth:!0,variant:"contained",color:"secondary",className:o.submit,onClick:function(e){if(!a.loading){var t=u._id,n=u.collectingFor;s({loading:!0,text:"Please wait! I'm processing your request"}),function(e,t){return new Promise((function(a,n){W.a.post("/stop-collecting",{classroomId:e,attendanceId:t}).then((function(e){return a(e)})).catch((function(e){return n(e)}))}))}(t,n).then((function(e){var t=e.data;t.error?i({visible:!0,snackType:"error",snackMessage:t.error}):(b(t.classroom),x(t.records))})).catch((function(e){i({visible:!0,snackType:"error",snackMessage:e})})).finally((function(){s({loading:!1,text:""})}))}},children:["Stop collecting attedance for ",u.collectingFor]}):Object(n.jsxs)("form",{className:o.form,noValidate:!0,onSubmit:function(e){if(e.preventDefault(),!a.loading){var t=String(document.getElementById("attendanceId").value).trim();""!==t?(s({loading:!0,text:"Please wait! I'm processing your request"}),function(e,t){return new Promise((function(a,n){W.a.post("/collect-attendance",{classroomId:e,attendanceId:t}).then((function(e){return a(e)})).catch((function(e){return n(e)}))}))}(u._id,t).then((function(e){var t=e.data;t.error?i({visible:!0,snackType:"error",snackMessage:t.error}):(b(t.classroom),x(t.records))})).catch((function(e){i({visible:!0,snackType:"error",snackMessage:e})})).finally((function(){s({loading:!1,text:""})}))):i({visible:!0,snackType:"error",snackMessage:"Please provide a valid attendanceId"})}},children:[Object(n.jsx)(O.a,{variant:"outlined",margin:"normal",fullWidth:!0,id:"attendanceId",label:"Attendance ID",name:"attendanceId",autoComplete:"text",autoFocus:!0}),Object(n.jsx)(m.a,{id:"submitButton",type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:o.submit,children:"Collect attendance"})]}),Object(n.jsxs)("div",{style:{textAlign:"center"},children:[Object(n.jsx)("br",{}),"Your attendance record for this classroom!"]}),Object(n.jsx)(we.a,{component:Ie.a,children:Object(n.jsx)(ve.a,{className:o.table,"aria-label":"custom pagination table",id:"attendanceRecordTable",children:Object(n.jsxs)(ye.a,{children:[(M>0?w.slice(P*M,P*M+M):w).map((function(e){return Object(n.jsx)(Pe.a,{children:e.value},e.key)})),B>0&&Object(n.jsx)(Pe.a,{style:{height:53*B},children:Object(n.jsx)(ke.a,{colSpan:6})})]})})}),Object(n.jsx)(we.a,{children:Object(n.jsx)(ve.a,{children:Object(n.jsx)(Se.a,{children:Object(n.jsx)(Pe.a,{children:Object(n.jsx)(Ce.a,{rowsPerPageOptions:[5,10,25,{label:"All",value:-1}],colSpan:3,count:w.length,rowsPerPage:M,page:P,SelectProps:{inputProps:{"aria-label":"rows per page"},native:!0},onChangePage:function(e,t){I(t)},onChangeRowsPerPage:function(e){A(parseInt(e.target.value,10)),I(0)},ActionsComponent:Ue})})})})})]})}var qe=Object(b.a)((function(e){return{root:{display:"flex"},toolbar:{paddingRight:24},toolbarIcon:Object(o.a)({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:"0 8px"},e.mixins.toolbar),appBar:{zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{marginLeft:240,width:"calc(100% - ".concat(240,"px)"),transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},menuButton:{marginRight:36},menuButtonHidden:{display:"none"},title:{flexGrow:1},drawerPaper:{position:"relative",whiteSpace:"nowrap",width:240,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},drawerPaperClose:Object(q.a)({overflowX:"hidden",transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),width:e.spacing(7)},e.breakpoints.up("sm"),{width:e.spacing(9)}),appBarSpacer:e.mixins.toolbar,content:{flexGrow:1,height:"100vh",overflow:"auto"},container:{paddingTop:e.spacing(4),paddingBottom:e.spacing(4)},paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"},fixedHeight:{height:240}}}));function Ge(){var e=qe(),t=Object(r.useState)(!0),a=Object(j.a)(t,2),c=a[0],s=a[1],i=Object(r.useState)({loading:!1,text:""}),o=Object(j.a)(i,2),l=o[0],u=o[1],b=Object(r.useState)(null),m=Object(j.a)(b,2),h=m[0],g=m[1],p=Object(r.useState)(null),x=Object(j.a)(p,2),O=x[0],v=x[1],y=Object(r.useState)(null),k=Object(j.a)(y,2),C=k[0],P=k[1],I=Object(r.useState)({visible:!1,snackType:"success",snackMessage:""}),N=Object(j.a)(I,2),B=N[0],F=N[1],_=function(e,t){F({visible:!0,snackType:e,snackMessage:t})},E=function(e){F({visible:!1,snackType:"success",snackMessage:""})};Object(r.useEffect)((function(){(function(e){return new Promise((function(t,a){W.a.get("/user/"+e).then((function(e){return t(e)})).catch((function(e){return a(e)}))}))})(function(e){var t=z.a.AES.decrypt(e,R);return JSON.parse(t.toString(z.a.enc.Utf8))}(localStorage.getItem("_auth"))).then((function(e){var t=e.data;t.error?(console.log(t.error),F({visible:!0,snackType:"error"}),localStorage.removeItem("_auth"),P(Object(n.jsx)(d.c,{to:"/login"}))):v(t.user)})).catch((function(e){console.log(e),localStorage.removeItem("_auth"),P(Object(n.jsx)(d.c,{to:"/login"}))}))}),[]);var D=function(e){if(null!=O&&!l.loading){var t,a,n,r,c="teacher"===O.role;u({loading:!0,text:"".concat(c?"Creating":"Joininig"," classroom")}),c?(n=O._id,r=e,new Promise((function(e,t){W.a.post("/create-classroom",{userId:n,className:r}).then((function(t){return e(t)})).catch((function(e){return t(e)}))}))).then((function(e){var t=e.data;t.error?F({visible:!0,snackType:"error",snackMessage:t.error}):(F({visible:!0,snackType:"success",snackMessage:"Your classroom was successfully created!"}),v(t.user))})).catch((function(e){F({visible:!0,snackType:"error",snackMessage:e})})).finally((function(){u({loading:!1,text:""})})):(t=O.email,a=e,new Promise((function(e,n){W.a.post("/join-classroom",{useremail:t,classCode:a}).then((function(t){return e(t)})).catch((function(e){return n(e)}))}))).then((function(e){var t=e.data;console.log(t),t.error?F({visible:!0,snackType:"error",snackMessage:t.error}):(F({visible:!0,snackType:"success",snackMessage:"Your were successfully added to the classroom!"}),v(t.user))})).catch((function(e){F({visible:!0,snackType:"error",snackMessage:e})})).finally((function(){u({loading:!1,text:""})}))}},H=null!=h&&(h.type===Je||h.type===De);if(C)return C;if(null===O)return Object(n.jsx)("div",{children:"Loading your details..."});var U="teacher"===O.role;return Object(n.jsx)(T.a,{active:l.loading,spinner:!0,text:l.text,children:Object(n.jsxs)("div",{className:e.root,children:[Object(n.jsx)(f.a,{}),Object(n.jsx)(Z.a,{position:"absolute",className:Object(G.a)(e.appBar,c&&e.appBarShift),children:Object(n.jsxs)($.a,{className:e.toolbar,children:[Object(n.jsx)(A.a,{edge:"start",color:"inherit","aria-label":"open drawer",onClick:function(){s(!0)},className:Object(G.a)(e.menuButton,c&&e.menuButtonHidden),children:Object(n.jsx)(ee.a,{})}),Object(n.jsx)(w.a,{component:"h1",variant:"h6",color:"inherit",noWrap:!0,className:e.title,children:O.username+"("+O.role+")"}),Object(n.jsx)(A.a,{color:"inherit",onClick:function(e){null!=O&&function(e){return new Promise((function(t,a){W.a.post("/logout",{userId:e}).then((function(e){return t(e)})).catch((function(e){return a(e)}))}))}(O._id).then((function(e){var t=e.data;t.error?F({visible:!0,snackType:"error",snackMessage:t.error}):(localStorage.removeItem("_auth"),P(Object(n.jsx)(d.c,{to:"/login"})))})).catch((function(e){F({visible:!0,snackType:"error",snackMessage:e})}))},children:Object(n.jsx)(ae.a,{})})]})}),Object(n.jsxs)(V.a,{variant:"permanent",classes:{paper:Object(G.a)(e.drawerPaper,!c&&e.drawerPaperClose)},open:c,children:[Object(n.jsxs)("div",{className:e.toolbarIcon,children:["Attendance Management",Object(n.jsx)(A.a,{onClick:function(){s(!1)},children:Object(n.jsx)(re.a,{})})]}),Object(n.jsx)(K.a,{}),Object(n.jsx)(X.a,{children:Object(n.jsxs)("div",{children:[Object(n.jsxs)(oe.a,{button:!0,onClick:function(e){var t=Object(n.jsx)(fe,{showSnackBar:_,onAddClassroom:D,role:null!=O?O.role:"teacher"});g(t)},disabled:l.loading,children:[Object(n.jsx)(le.a,{children:Object(n.jsx)(je.a,{})}),Object(n.jsx)(de.a,{primary:U?"New classroom":"Join classroom"})]}),Object(n.jsxs)(oe.a,{button:!0,onClick:function(){if(null!==O&&!l.loading){u({loading:!0,text:"Please wait! I'm processing your request"});var e=h.props.classroomId;"teacher"===O.role?function(e){return new Promise((function(t,a){W.a.post("/delete-classroom",{classroomId:e}).then((function(e){return t(e)})).catch((function(e){return a(e)}))}))}(e).then((function(e){var t=e.data;t.error?F({visible:!0,snackType:"error",snackMessage:t.error}):(F({visible:!0,snackType:"success",snackMessage:"Your classroom with all records was successfully deleted!"}),v(t.user),g(null))})).catch((function(e){F({visible:!0,snackType:"error",snackMessage:e})})).finally((function(){u({loading:!1,text:""})})):function(e,t){return new Promise((function(a,n){W.a.post("/leave-classroom",{userEmail:e,classroomId:t}).then((function(e){return a(e)})).catch((function(e){return n(e)}))}))}(O.email,e).then((function(e){var t=e.data;t.error?F({visible:!0,snackType:"error",snackMessage:t.error}):(F({visible:!0,snackType:"success",snackMessage:"You were successfully removed from the classroom!"}),v(t.user),g(null))})).catch((function(e){F({visible:!0,snackType:"error",snackMessage:e})})).finally((function(){u({loading:!1,text:""})}))}},disabled:l.loading||!H,children:[Object(n.jsx)(le.a,{children:Object(n.jsx)(me.a,{})}),Object(n.jsx)(de.a,{primary:U?"Delete Classroom":"Leave Classroom"})]}),Object(n.jsxs)(oe.a,{button:!0,onClick:function(){for(var e="",t=document.querySelectorAll("#attendanceRecordTable tr"),a=0;a<t.length;++a){var n=t[a].children;if(0!==n.length&&""!==n[0].innerText){for(var r=n[0].innerText,c=1;c<n.length;++c){r+=", "+n[c].innerText}e+=r+"\n"}}var s=h.props.className,i="".concat(O.email,"-").concat(O.role,"-").concat(s,".csv"),o=document.createElement("a");o.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(e)),o.setAttribute("download",i),o.style.display="none",document.body.appendChild(o),o.click(),document.body.removeChild(o)},disabled:l.loading||!H,children:[Object(n.jsx)(le.a,{children:Object(n.jsx)(ge.a,{})}),Object(n.jsx)(de.a,{primary:"Export Statistics"})]})]})}),Object(n.jsx)(K.a,{}),Object(n.jsx)(X.a,{children:Object(n.jsxs)("div",{children:[Object(n.jsx)(ce.a,{inset:!0,children:"Your classrooms"}),O.classrooms&&O.classrooms.map((function(e){return Object(n.jsxs)(oe.a,{button:!0,disabled:l.loading,onClick:function(t){return function(e){if(null!==O&&!l.loading){var t=null;t="teacher"===O.role?Object(n.jsx)(Je,{classroomId:e._id,loader:l,setLoader:u,setSnack:F,user:O,className:e.className}):Object(n.jsx)(De,{classroomId:e._id,loader:l,setLoader:u,setSnack:F,user:O,className:e.className}),g(t)}}(e)},children:[Object(n.jsx)(le.a,{children:Object(n.jsx)(ie.a,{})}),Object(n.jsx)(de.a,{primary:e.className})]},e._id)}))]})})]}),Object(n.jsxs)("main",{className:e.content,children:[Object(n.jsx)("div",{className:e.appBarSpacer}),Object(n.jsx)(S.a,{maxWidth:"lg",className:e.container,children:!h&&Object(n.jsxs)("p",{children:["Welcome ",O.username,"!",Object(n.jsx)("br",{}),"We are glad to see here.",Object(n.jsx)("br",{}),"Click on the left menu to get started!"]})}),h]}),Object(n.jsx)(pe.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:B.visible,autoHideDuration:6e3,onClose:E,children:Object(n.jsx)(M.a,{severity:B.snackType,action:Object(n.jsx)(A.a,{"aria-label":"close",color:"inherit",size:"small",onClick:E,children:Object(n.jsx)(L.a,{fontSize:"inherit"})}),children:String(B.snackMessage)})})]})})}var Ve=a.p+"static/media/404.fa1a6217.gif";function Ze(){return Object(n.jsxs)("div",{id:"page404",style:{display:"flex",alignItems:"center",height:"100vh"},children:[Object(n.jsx)("div",{children:Object(n.jsx)("img",{src:Ve,alt:"page-404",style:{width:"100%"}})}),Object(n.jsxs)("div",{style:{textAlign:"center"},children:[Object(n.jsx)("p",{children:"The page you are looking for does not exist!"}),Object(n.jsx)(m.a,{variant:"contained",color:"primary",href:"/",children:"Home"})]})]})}a(403);var $e=function(e){var t=e.component,a=Object(l.a)(e,["component"]);return Object(n.jsx)(d.d,Object(o.a)(Object(o.a)({},a),{},{render:function(e){var r=Object(o.a)(Object(o.a)({},e),a);return null==localStorage.getItem("_auth")?Object(n.jsx)(t,Object(o.a)({},r)):Object(n.jsx)(d.c,{to:{pathname:"/dashboard",state:{from:e.location}}})}}))},Xe=function(e){var t=e.component,a=Object(l.a)(e,["component"]);return Object(n.jsx)(d.d,Object(o.a)(Object(o.a)({},a),{},{render:function(e){var r=Object(o.a)(Object(o.a)({},e),a);return null!=localStorage.getItem("_auth")?Object(n.jsx)(t,Object(o.a)({},r)):Object(n.jsx)(d.c,{to:{pathname:"/login",state:{from:e.location}}})}}))};var Ke=function(){return Object(n.jsx)("div",{id:"baseDiv",children:Object(n.jsx)(u.HashRouter,{basename:"/",children:Object(n.jsxs)(d.g,{children:[Object(n.jsx)($e,{exact:!0,path:"/",component:p}),Object(n.jsx)($e,{exact:!0,path:"/login",component:U,register:!1}),Object(n.jsx)($e,{exact:!0,path:"/register",component:U,register:!0}),Object(n.jsx)($e,{exact:!0,path:"/forgot-password",component:J,reset:!1}),Object(n.jsx)($e,{exact:!0,path:"/reset-password/:tokenId",component:J,reset:!0}),Object(n.jsx)(Xe,{exact:!0,path:"/dashboard",component:Ge}),Object(n.jsx)(d.d,{path:"/",component:Ze})]})})})};i.a.render(Object(n.jsx)(c.a.Fragment,{children:Object(n.jsx)(Ke,{})}),document.getElementById("root"))}},[[404,1,2]]]);
//# sourceMappingURL=main.9a93cc93.chunk.js.map