(this["webpackJsonpattendance-management"]=this["webpackJsonpattendance-management"]||[]).push([[0],{255:function(e,t,a){},290:function(e,t){},292:function(e,t){},303:function(e,t){},305:function(e,t){},332:function(e,t){},334:function(e,t){},335:function(e,t){},340:function(e,t){},342:function(e,t){},361:function(e,t){},373:function(e,t){},376:function(e,t){},403:function(e,t,a){},404:function(e,t,a){"use strict";a.r(t);var n=a(2),r=a(0),c=a.n(r),s=a(14),i=a.n(s),o=(a(255),a(25)),l=a(147),d=a(18),u=a(75),j=a(13),b=a(443),m=a(446),h=a.p+"static/media/brand.2d6d0d51.png",g=Object(b.a)((function(e){return{homepage:{userSelect:"none"},header:{textAlign:"center",color:"#2977c9"},content:{display:"flex",alignItems:"center"},leftFlexBox:{flex:.5,textAlign:"center",marginRight:"10px"},rightFlexBox:{flex:.5,textAlign:"left",marginLeft:"10px"},brandImage:{borderRadius:"50%",width:"200px",height:"200px"},button:{margin:"auto 10px"}}}));var f=function(e){var t=g(),a=Object(r.useState)(null),c=Object(j.a)(a,2),s=c[0],i=c[1];return s||Object(n.jsxs)("div",{className:t.homepage,children:[Object(n.jsx)("h1",{className:t.header,children:"Attendance Management System"}),Object(n.jsxs)("div",{className:t.content,children:[Object(n.jsx)("div",{className:t.leftFlexBox,children:Object(n.jsx)("img",{src:h,alt:"our-brand",className:t.brandImage})}),Object(n.jsxs)("div",{className:t.rightFlexBox,children:[Object(n.jsxs)("p",{children:["- One place to manage all your attendances! ",Object(n.jsx)("br",{}),"- Create and delete classrooms on-demand! ",Object(n.jsx)("br",{}),"- Collect attendance on-demand! ",Object(n.jsx)("br",{}),"- Maintain your attendance record with ease! ",Object(n.jsx)("br",{}),"- Export attendance-statistics of your classroom! ",Object(n.jsx)("br",{}),"- and many more features for free!"]}),Object(n.jsxs)("p",{children:["Sounds exciting? ",Object(n.jsx)("br",{}),"Click on the button below to get started!"]}),Object(n.jsx)(m.a,{className:t.button,variant:"contained",color:"primary",onClick:function(e){return i(Object(n.jsx)(d.c,{to:"/login"}))},children:"Sign In"}),"OR",Object(n.jsx)(m.a,{className:t.button,variant:"contained",color:"primary",onClick:function(e){return i(Object(n.jsx)(d.c,{to:"/register"}))},children:"Sign Up"})]})]})]})},p=a(481),x=a(449),O=a(478),v=a(457),y=a(81),k=a(458),w=a(96),S=a(448),C=a(475),I=a(482),P=a(454),N=a(77),T=a.n(N),M=a(474),A=a(451),B=a(450),F=a(56),L=a.n(F),_=a(26),W=a.n(_),E=a(113),z=a.n(E),R="e3483b2f6bc28d1f6c5253b1c8c860cbb7562341e75059c45108afdbe0fa92d0b152dc40ded35908921aa2e954f50830f157090b5a36319edef6901469f1afeb";W.a.defaults.baseURL="https://attendance-management-server.herokuapp.com";var D=function(e){var t=z.a.AES.decrypt(e,R);return JSON.parse(t.toString(z.a.enc.Utf8))};function H(){var e=localStorage.getItem("data");return e?D(e).token:null}var U=function(e,t){var a=H();return new Promise((function(n,r){W.a.post("/classroom/"+t,{userId:e,token:a}).then((function(e){return n(e)})).catch((function(e){return r(e)}))}))},Y=Object(b.a)((function(e){return{paper:{marginTop:e.spacing(0),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));function J(e){var t=e.register,a=Y(),c=Object(r.useState)("student"),s=Object(j.a)(c,2),i=s[0],l=s[1],u=Object(r.useState)({loading:!1,text:""}),b=Object(j.a)(u,2),g=b[0],f=b[1],N=Object(r.useState)(null),F=Object(j.a)(N,2),_=F[0],E=F[1],D=Object(r.useState)(null),H=Object(j.a)(D,2),U=H[0],J=H[1],q=Object(r.useState)(null),G=Object(j.a)(q,2),V=G[0],Z=G[1];return V||Object(n.jsx)("div",{id:"authForm",children:Object(n.jsx)(T.a,{active:g.loading,spinner:!0,text:g.text,children:Object(n.jsxs)(S.a,{component:"main",maxWidth:"xs",children:[Object(n.jsx)(x.a,{}),Object(n.jsxs)("div",{className:a.paper,children:[Object(n.jsx)(p.a,{className:a.avatar,src:h}),Object(n.jsx)(w.a,{component:"h1",variant:"h5",children:t?"Sign Up":"Sign In"}),Object(n.jsxs)("form",{className:a.form,noValidate:!0,onSubmit:function(e){if(e.preventDefault(),!g.loading){var a=null;t&&(a=String(document.getElementById("username").value).toLowerCase().trim());var r=String(document.getElementById("email").value).toLowerCase().trim(),c=String(document.getElementById("password").value).toLowerCase().trim();if(null==a||""!==a)if(function(e){return/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())}(r))if(""!==c)if("student"===i||"teacher"===i)if(t)f({loading:!0,text:"Please wait! I'm setting up your account"}),function(e){return new Promise((function(t,a){W.a.post("/register",Object(o.a)({},e)).then((function(e){return t(e)})).catch((function(e){return a(e)}))}))}({username:a,email:r,password:c,role:i}).then((function(e){var t=e.data;t.error?E(t.error):J("Your registration was successful!")})).catch((function(e){E(e)})).finally((function(){f({loading:!1,text:""})}));else f({loading:!0,text:"Please wait! I'm validating your credentials."}),function(e){return new Promise((function(t,a){W.a.post("/login",Object(o.a)({},e)).then((function(e){return t(e)})).catch((function(e){return a(e)}))}))}({email:r,password:c,role:i}).then((function(e){var t,a=e.data;a.error?E(a.error):(localStorage.setItem("data",(t=a,z.a.AES.encrypt(JSON.stringify(t),R))),J("You are successfully logged in!"),Z(Object(n.jsx)(d.c,{to:"/dashboard"})))})).catch((function(e){E(e)})).finally((function(){f({loading:!1,text:""})}));else E("Please select your role!");else E("Please provide a valid password!");else E("Please provide a valid email!");else E("Please provide a valid username!")}},children:[Object(n.jsxs)(B.a,{in:Boolean(U||_),children:[U&&Object(n.jsxs)(M.a,{severity:"success",action:Object(n.jsx)(A.a,{"aria-label":"close",color:"inherit",size:"small",onClick:function(){J(null),E(null)},children:Object(n.jsx)(L.a,{fontSize:"inherit"})}),children:[" ",String(U)]}),_&&Object(n.jsxs)(M.a,{severity:"error",action:Object(n.jsx)(A.a,{"aria-label":"close",color:"inherit",size:"small",onClick:function(){J(null),E(null)},children:Object(n.jsx)(L.a,{fontSize:"inherit"})}),children:[" ",String(_)]})]}),t&&Object(n.jsx)(O.a,{variant:"outlined",margin:"normal",fullWidth:!0,id:"username",label:"Username",name:"username",autoComplete:"text",autoFocus:!0}),Object(n.jsx)(O.a,{variant:"outlined",margin:"normal",fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0}),Object(n.jsx)(O.a,{variant:"outlined",margin:"normal",fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password"}),Object(n.jsx)(P.a,{component:"fieldset",children:Object(n.jsxs)(I.a,{row:!0,"aria-label":"role",name:"role",value:i,onChange:function(e){return l(e.target.value)},children:[Object(n.jsx)(v.a,{value:"student",control:Object(n.jsx)(C.a,{}),label:"Student"}),Object(n.jsx)(v.a,{value:"teacher",control:Object(n.jsx)(C.a,{}),label:"Teacher"})]})}),Object(n.jsx)(m.a,{id:"submitButton",type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:a.submit,children:t?"Sign Up":"Sign In"}),Object(n.jsxs)(k.a,{container:!0,children:[Object(n.jsx)(k.a,{item:!0,xs:!0,children:!t&&Object(n.jsx)(y.HashLink,{to:"/forgot-password",variant:"body2",children:"Forgot password?"})}),Object(n.jsx)(k.a,{item:!0,children:Object(n.jsx)(y.HashLink,{to:t?"/login":"/register",variant:"body2",children:t?"Already have an account? Sign In":"Don't have an account? Sign Up"})})]}),Object(n.jsx)("d",{style:{height:"10px"}})]})]})]})})})}var q=Object(b.a)((function(e){return{paper:{marginTop:e.spacing(0),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));function G(e){var t=e.reset,a=q(),c=Object(r.useState)("student"),s=Object(j.a)(c,2),i=s[0],o=s[1],l=Object(r.useState)({loading:!1,text:""}),d=Object(j.a)(l,2),u=d[0],b=d[1],g=Object(r.useState)(null),f=Object(j.a)(g,2),N=f[0],F=f[1],_=Object(r.useState)(null),E=Object(j.a)(_,2),z=E[0],R=E[1];return Object(n.jsx)("div",{id:"forgotPasswordForm",children:Object(n.jsx)(T.a,{active:u.loading,spinner:!0,text:u.text,children:Object(n.jsxs)(S.a,{component:"main",maxWidth:"xs",children:[Object(n.jsx)(x.a,{}),Object(n.jsxs)("div",{className:a.paper,children:[Object(n.jsx)(p.a,{className:a.avatar,src:h}),Object(n.jsx)(w.a,{component:"h1",variant:"h5",children:t?"Reset Password":"Forgot Password"}),Object(n.jsxs)("form",{className:a.form,noValidate:!0,onSubmit:function(a){if(a.preventDefault(),!u.loading)if(t){var n=String(document.getElementById("password").value).trim();if(""===n)return void F("Please provide a valid password");var r=e.match.params.tokenId;b({loading:!0,text:"Please wait! I'm processing your request!"}),function(e,t){return new Promise((function(a,n){W.a.post("/reset-password",{tokenId:e,password:t}).then((function(e){return a(e)})).catch((function(e){return n(e)}))}))}(r,n).then((function(e){var t=e.data.error;t?F(t):R("Your password was successfully updated!")})).catch((function(e){F(e)})).finally((function(){b({loading:!1,text:""})}))}else{var c=document.getElementById("email").value;if(!function(e){return/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())}(c))return void F("Please provide a valid email!");b({loading:!0,text:"Please wait! I'm processing your request!"}),function(e,t){return new Promise((function(a,n){W.a.post("/forgot-password",{email:e,role:t}).then((function(e){return a(e)})).catch((function(e){return n(e)}))}))}(c,i).then((function(e){var t=e.data.error;t?F(t):R("An email has been sent to your email-address!")})).catch((function(e){F(e)})).finally((function(){b({loading:!1,text:""})}))}},children:[Object(n.jsxs)(B.a,{in:Boolean(z||N),children:[z&&Object(n.jsxs)(M.a,{severity:"success",action:Object(n.jsx)(A.a,{"aria-label":"close",color:"inherit",size:"small",onClick:function(){R(null),F(null)},children:Object(n.jsx)(L.a,{fontSize:"inherit"})}),children:[" ",String(z)]}),N&&Object(n.jsxs)(M.a,{severity:"error",action:Object(n.jsx)(A.a,{"aria-label":"close",color:"inherit",size:"small",onClick:function(){R(null),F(null)},children:Object(n.jsx)(L.a,{fontSize:"inherit"})}),children:[" ",String(N)]})]}),t&&Object(n.jsx)(O.a,{variant:"outlined",margin:"normal",fullWidth:!0,id:"password",label:"New Password",name:"password",type:"password",autoComplete:"password",autoFocus:!0}),!t&&Object(n.jsxs)("div",{children:[Object(n.jsx)(O.a,{variant:"outlined",margin:"normal",fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0}),Object(n.jsx)(P.a,{component:"fieldset",children:Object(n.jsxs)(I.a,{row:!0,"aria-label":"role",name:"role",value:i,onChange:function(e){return o(e.target.value)},children:[Object(n.jsx)(v.a,{value:"student",control:Object(n.jsx)(C.a,{}),label:"Student"}),Object(n.jsx)(v.a,{value:"teacher",control:Object(n.jsx)(C.a,{}),label:"Teacher"})]})})]}),Object(n.jsx)(m.a,{id:"submitButton",type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:a.submit,children:"Submit"}),!t&&Object(n.jsxs)(k.a,{container:!0,children:[Object(n.jsx)(k.a,{item:!0,xs:!0,children:Object(n.jsx)(y.HashLink,{to:"/login",variant:"body2",children:"Go to Sign In"})}),Object(n.jsx)(k.a,{item:!0,xs:!0,children:Object(n.jsx)(y.HashLink,{to:"/login",variant:"body2",children:"Go to Sign Up"})})]})]})]})]})})})}var V=a(106),Z=a(4),$=a(479),X=a(468),K=a(467),Q=a(456),ee=a(469),te=a(220),ae=a.n(te),ne=a(221),re=a.n(ne),ce=a(222),se=a.n(ce),ie=a(472),oe=a(226),le=a.n(oe),de=a(466),ue=a(470),je=a(471),be=a(223),me=a.n(be),he=a(224),ge=a.n(he),fe=a(225),pe=a.n(fe),xe=a(480),Oe=Object(b.a)((function(e){return{paper:{marginTop:e.spacing(0),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));function ve(e){var t=e.showSnackBar,a=e.onAddClassroom,r=e.isTeacher,c=Oe(),s=r?"classname":"classcode";return Object(n.jsx)("div",{id:"addClassroomForm",children:Object(n.jsxs)(S.a,{component:"main",maxWidth:"xs",children:[Object(n.jsx)(x.a,{}),Object(n.jsxs)("div",{className:c.paper,children:[Object(n.jsx)(p.a,{className:c.avatar,src:h}),Object(n.jsxs)(w.a,{component:"h1",variant:"h5",children:[r?"Create":"Join"," Classroom"]}),Object(n.jsxs)("form",{className:c.form,noValidate:!0,onSubmit:function(e){e.preventDefault();var n=String(document.getElementById(s).value).trim();0!==n.length?a(n):t("error","Please provide a valid classname")},autoComplete:"off",children:[Object(n.jsx)(O.a,{variant:"outlined",margin:"normal",fullWidth:!0,id:s,label:s,name:s,autoComplete:"off",autoFocus:!0}),Object(n.jsx)(m.a,{id:"submitButton",type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:c.submit,children:r?"Create":"Join"})]})]})]})})}var ye=a(23),ke=a(461),we=a(462),Se=a(464),Ce=a(460),Ie=a(465),Pe=a(477),Ne=a(463),Te=a(405),Me=a(83),Ae=a.n(Me),Be=a(85),Fe=a.n(Be),Le=a(84),_e=a.n(Le),We=a(82),Ee=a.n(We),ze=a(459),Re=Object(b.a)((function(e){return{root:{flexShrink:0,marginLeft:e.spacing(2.5)}}}));function De(e){var t=Re(),a=Object(ye.a)(),r=e.count,c=e.page,s=e.rowsPerPage,i=e.onChangePage;return Object(n.jsxs)("div",{className:t.root,children:[Object(n.jsx)(A.a,{onClick:function(e){i(e,0)},disabled:0===c,"aria-label":"first page",children:"rtl"===a.direction?Object(n.jsx)(Ee.a,{}):Object(n.jsx)(Ae.a,{})}),Object(n.jsx)(A.a,{onClick:function(e){i(e,c-1)},disabled:0===c,"aria-label":"previous page",children:"rtl"===a.direction?Object(n.jsx)(_e.a,{}):Object(n.jsx)(Fe.a,{})}),Object(n.jsx)(A.a,{onClick:function(e){i(e,c+1)},disabled:c>=Math.ceil(r/s)-1,"aria-label":"next page",children:"rtl"===a.direction?Object(n.jsx)(Fe.a,{}):Object(n.jsx)(_e.a,{})}),Object(n.jsx)(A.a,{onClick:function(e){i(e,Math.max(0,Math.ceil(r/s)-1))},disabled:c>=Math.ceil(r/s)-1,"aria-label":"last page",children:"rtl"===a.direction?Object(n.jsx)(Ae.a,{}):Object(n.jsx)(Ee.a,{})})]})}var He=Object(b.a)((function(e){return{paper:{marginTop:e.spacing(0),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)},classroomPage:{padding:"10px",width:"80%",margin:"10px auto"},root:{flexShrink:0,marginLeft:e.spacing(2.5)},table:{minWidth:500}}}));function Ue(e){for(var t=e.user,a=e.classroomId,s=e.setLoader,i=e.setSnack,o=He(),l=Object(r.useState)(null),d=Object(j.a)(l,2),u=d[0],b=d[1],h=Object(r.useState)([]),g=Object(j.a)(h,2),f=g[0],p=g[1],x=Object(r.useState)("Loading details of the classroom!"),O=Object(j.a)(x,2),v=O[0],y=O[1],k=[],w=0;w<f.length;++w){var S=f[w],C=S.attendanceId,I=null;I=-1===S.students.indexOf(t.email)?Object(n.jsx)(ze.a,{color:"secondary",badgeContent:"Absent"}):Object(n.jsx)(ze.a,{color:"primary",badgeContent:"Present"}),k.push({key:C,value:I})}var P=c.a.useState(0),N=Object(j.a)(P,2),T=N[0],M=N[1],A=c.a.useState(5),B=Object(j.a)(A,2),F=B[0],L=B[1],_=F-Math.min(F,k.length-T*F);Object(r.useEffect)((function(){s({loading:!0,text:"Please wait! I'm fetching details for this classroom"}),U(t._id,a).then((function(e){var t=e.data;t.error?(y("Failed to load details of this classroom!"),i({visible:!0,snackType:"error",snackMessage:t.error})):(b(t.classroom),p(t.records))})).catch((function(e){i({visible:!0,snackType:"error",snackMessage:e})})).finally((function(){s({loading:!1,text:""})}))}),[a,s,i,t._id]);for(var E=!1,z=0;z<f.length;++z)if(f[z].attendanceId===u.collectingFor){E=-1===f[z].students.indexOf(t.email);break}return null===u?Object(n.jsx)("div",{id:"classroomPage",className:o.classroomPage,children:v}):Object(n.jsxs)("div",{id:"classroomPage",className:o.classroomPage,children:[Object(n.jsxs)("div",{style:{textAlign:"center"},children:[Object(n.jsx)("strong",{children:"Classroom Name: "}),u.className]}),Object(n.jsxs)("div",{style:{textAlign:"center"},children:[Object(n.jsx)("strong",{children:"Classroom Code: "}),u.code]}),u.collectingFor&&E&&Object(n.jsxs)(m.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:o.submit,onClick:function(){s({loading:!0,text:"Please wait! I'm marking your attendance!"}),function(e,t){var a=H();return new Promise((function(n,r){W.a.post("/mark-attendance",{userId:e,token:a,classroomId:t}).then((function(e){return n(e)})).catch((function(e){return r(e)}))}))}(t._id,u._id).then((function(e){var t=e.data;t.error?i({visible:!0,snackType:"error",snackMessage:t.error}):(b(t.classroom),p(t.records))})).catch((function(e){i({visible:!0,snackType:"error",snackMessage:e})})).finally((function(){s({loading:!1,text:""})}))},children:["Mark attedance for ",u.collectingFor]}),Object(n.jsxs)("div",{style:{textAlign:"center"},children:[Object(n.jsx)("br",{}),"Your attendance record for this classroom!"]}),Object(n.jsx)(Ce.a,{component:Te.a,children:Object(n.jsx)(ke.a,{className:o.table,"aria-label":"custom pagination table",id:"attendanceRecordTable",children:Object(n.jsxs)(we.a,{children:[(F>0?k.slice(T*F,T*F+F):k).map((function(e){return Object(n.jsxs)(Ne.a,{children:[Object(n.jsx)(Se.a,{component:"th",scope:"row",children:e.key}),Object(n.jsx)(Se.a,{align:"left",children:e.value})]},e.key)})),_>0&&Object(n.jsx)(Ne.a,{style:{height:53*_},children:Object(n.jsx)(Se.a,{colSpan:6})})]})})}),Object(n.jsx)(Ce.a,{children:Object(n.jsx)(ke.a,{children:Object(n.jsx)(Ie.a,{children:Object(n.jsx)(Ne.a,{children:Object(n.jsx)(Pe.a,{rowsPerPageOptions:[5,10,25,{label:"All",value:-1}],colSpan:3,count:k.length,rowsPerPage:F,page:T,SelectProps:{inputProps:{"aria-label":"rows per page"},native:!0},onChangePage:function(e,t){M(t)},onChangeRowsPerPage:function(e){L(parseInt(e.target.value,10)),M(0)},ActionsComponent:De})})})})})]})}var Ye=Object(b.a)((function(e){return{root:{flexShrink:0,marginLeft:e.spacing(2.5)}}}));function Je(e){var t=Ye(),a=Object(ye.a)(),r=e.count,c=e.page,s=e.rowsPerPage,i=e.onChangePage;return Object(n.jsxs)("div",{className:t.root,children:[Object(n.jsx)(A.a,{onClick:function(e){i(e,0)},disabled:0===c,"aria-label":"first page",children:"rtl"===a.direction?Object(n.jsx)(Ee.a,{}):Object(n.jsx)(Ae.a,{})}),Object(n.jsx)(A.a,{onClick:function(e){i(e,c-1)},disabled:0===c,"aria-label":"previous page",children:"rtl"===a.direction?Object(n.jsx)(_e.a,{}):Object(n.jsx)(Fe.a,{})}),Object(n.jsx)(A.a,{onClick:function(e){i(e,c+1)},disabled:c>=Math.ceil(r/s)-1,"aria-label":"next page",children:"rtl"===a.direction?Object(n.jsx)(Fe.a,{}):Object(n.jsx)(_e.a,{})}),Object(n.jsx)(A.a,{onClick:function(e){i(e,Math.max(0,Math.ceil(r/s)-1))},disabled:c>=Math.ceil(r/s)-1,"aria-label":"last page",children:"rtl"===a.direction?Object(n.jsx)(Ae.a,{}):Object(n.jsx)(Ee.a,{})})]})}var qe=Object(b.a)((function(e){return{paper:{marginTop:e.spacing(0),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)},classroomPage:{padding:"10px",width:"80%",margin:"10px auto"},root:{flexShrink:0,marginLeft:e.spacing(2.5)},table:{minWidth:500}}}));function Ge(e){var t=e.classroomId,a=e.loader,s=e.setLoader,i=e.setSnack,o=e.user,l=qe(),d=Object(r.useState)(null),u=Object(j.a)(d,2),b=u[0],h=u[1],g=Object(r.useState)([]),f=Object(j.a)(g,2),p=f[0],x=f[1],v=Object(r.useState)("Loading details of the classroom!"),y=Object(j.a)(v,2),k=y[0],w=y[1],S=function(e,t){for(var a={backgroundColor:"#cff4fc",color:"#055160",padding:"5px",borderRadius:"5px"},r={backgroundColor:"#f8d7da",color:"#842029",padding:"5px",borderRadius:"5px"},c=[],s=["studentId"],i=0;i<t.length;++i)s.push(t[i].attendanceId);for(var o=[],l=0;l<s.length;++l)o.push(Object(n.jsx)(Se.a,{align:"left",children:Object(n.jsx)("strong",{children:s[l].toUpperCase()})},"head".concat(l)));if(c.push({key:"row_0",value:o}),null===e)return c;for(var d=e.studentOnce,u=0;u<d.length;++u){var j=d[u],b=[];b.push(Object(n.jsx)(Se.a,{align:"left",children:j},"cel_".concat(u,"_0")));for(var m=0;m<t.length;++m){var h=null;h=-1!==t[m].students.indexOf(j)?Object(n.jsx)("span",{style:a,children:"Present"}):Object(n.jsx)("span",{style:r,children:"Absent"}),b.push(Object(n.jsx)(Se.a,{align:"left",children:h},"cell_".concat(u,"_").concat(m+1)))}c.push({key:"row_".concat(u+1),value:b})}return c}(b,p),C=c.a.useState(0),I=Object(j.a)(C,2),P=I[0],N=I[1],T=c.a.useState(5),M=Object(j.a)(T,2),A=M[0],B=M[1],F=A-Math.min(A,S.length-P*A);Object(r.useEffect)((function(){s({loading:!0,text:"Please wait! I'm fetching details for this classroom"}),U(o._id,t).then((function(e){var t=e.data;t.error?(w("Failed to load details of this classroom!"),i({visible:!0,snackType:"error",snackMessage:t.error})):(h(t.classroom),x(t.records))})).catch((function(e){i({visible:!0,snackType:"error",snackMessage:e})})).finally((function(){s({loading:!1,text:""})}))}),[t,s,i,o._id]);return null===b?Object(n.jsx)("div",{id:"classroomPage",className:l.classroomPage,children:k}):Object(n.jsxs)("div",{id:"classroomPage",className:l.classroomPage,children:[Object(n.jsxs)("div",{style:{textAlign:"center"},children:[Object(n.jsx)("strong",{children:"Classroom Name: "}),b.className]}),Object(n.jsxs)("div",{style:{textAlign:"center"},children:[Object(n.jsx)("strong",{children:"Classroom Code: "}),b.code]}),b.collectingFor?Object(n.jsxs)(m.a,{type:"submit",fullWidth:!0,variant:"contained",color:"secondary",className:l.submit,onClick:function(e){if(!a.loading){var t=b._id,n=b.collectingFor;s({loading:!0,text:"Please wait! I'm processing your request"}),function(e,t,a){var n=H();return new Promise((function(r,c){W.a.post("/stop-collecting",{userId:e,token:n,classroomId:t,attendanceId:a}).then((function(e){return r(e)})).catch((function(e){return c(e)}))}))}(o._id,t,n).then((function(e){var t=e.data;t.error?i({visible:!0,snackType:"error",snackMessage:t.error}):(h(t.classroom),x(t.records))})).catch((function(e){i({visible:!0,snackType:"error",snackMessage:e})})).finally((function(){s({loading:!1,text:""})}))}},children:["Stop collecting attedance for ",b.collectingFor]}):Object(n.jsxs)("form",{className:l.form,noValidate:!0,onSubmit:function(e){if(e.preventDefault(),!a.loading){var t=String(document.getElementById("attendanceId").value).trim();""!==t?(s({loading:!0,text:"Please wait! I'm processing your request"}),function(e,t,a){var n=H();return new Promise((function(r,c){W.a.post("/collect-attendance",{userId:e,token:n,classroomId:t,attendanceId:a}).then((function(e){return r(e)})).catch((function(e){return c(e)}))}))}(o._id,b._id,t).then((function(e){var t=e.data;t.error?i({visible:!0,snackType:"error",snackMessage:t.error}):(h(t.classroom),x(t.records))})).catch((function(e){i({visible:!0,snackType:"error",snackMessage:e})})).finally((function(){s({loading:!1,text:""})}))):i({visible:!0,snackType:"error",snackMessage:"Please provide a valid attendanceId"})}},children:[Object(n.jsx)(O.a,{variant:"outlined",margin:"normal",fullWidth:!0,id:"attendanceId",label:"Attendance ID",name:"attendanceId",autoComplete:"text",autoFocus:!0}),Object(n.jsx)(m.a,{id:"submitButton",type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:l.submit,children:"Collect attendance"})]}),Object(n.jsxs)("div",{style:{textAlign:"center"},children:[Object(n.jsx)("br",{}),"Your attendance record for this classroom!"]}),Object(n.jsx)(Ce.a,{component:Te.a,children:Object(n.jsx)(ke.a,{className:l.table,"aria-label":"custom pagination table",id:"attendanceRecordTable",children:Object(n.jsxs)(we.a,{children:[(A>0?S.slice(P*A,P*A+A):S).map((function(e){return Object(n.jsx)(Ne.a,{children:e.value},e.key)})),F>0&&Object(n.jsx)(Ne.a,{style:{height:53*F},children:Object(n.jsx)(Se.a,{colSpan:6})})]})})}),Object(n.jsx)(Ce.a,{children:Object(n.jsx)(ke.a,{children:Object(n.jsx)(Ie.a,{children:Object(n.jsx)(Ne.a,{children:Object(n.jsx)(Pe.a,{rowsPerPageOptions:[5,10,25,{label:"All",value:-1}],colSpan:3,count:S.length,rowsPerPage:A,page:P,SelectProps:{inputProps:{"aria-label":"rows per page"},native:!0},onChangePage:function(e,t){N(t)},onChangeRowsPerPage:function(e){B(parseInt(e.target.value,10)),N(0)},ActionsComponent:Je})})})})})]})}var Ve=Object(b.a)((function(e){return{root:{display:"flex"},toolbar:{paddingRight:24},toolbarIcon:Object(o.a)({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:"0 8px"},e.mixins.toolbar),appBar:{zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{marginLeft:240,width:"calc(100% - ".concat(240,"px)"),transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},menuButton:{marginRight:36},menuButtonHidden:{display:"none"},title:{flexGrow:1},drawerPaper:{position:"relative",whiteSpace:"nowrap",width:240,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},drawerPaperClose:Object(V.a)({overflowX:"hidden",transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),width:e.spacing(7)},e.breakpoints.up("sm"),{width:e.spacing(9)}),appBarSpacer:e.mixins.toolbar,content:{flexGrow:1,height:"100vh",overflow:"auto"},container:{paddingTop:e.spacing(4),paddingBottom:e.spacing(4)},paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"},fixedHeight:{height:240}}}));function Ze(){var e=Ve(),t=Object(r.useState)(!0),a=Object(j.a)(t,2),c=a[0],s=a[1],i=Object(r.useState)({loading:!1,text:""}),o=Object(j.a)(i,2),l=o[0],u=o[1],b=Object(r.useState)(null),m=Object(j.a)(b,2),h=m[0],g=m[1],f=Object(r.useState)(null),p=Object(j.a)(f,2),O=p[0],v=p[1],y=Object(r.useState)(null),k=Object(j.a)(y,2),C=k[0],I=k[1],P=Object(r.useState)({visible:!1,snackType:"success",snackMessage:""}),N=Object(j.a)(P,2),B=N[0],F=N[1],_=function(e,t){F({visible:!0,snackType:e,snackMessage:t})},E=function(e){F({visible:!1,snackType:"success",snackMessage:""})};Object(r.useEffect)((function(){var e=localStorage.getItem("data");(function(e){var t=H();return new Promise((function(a,n){W.a.post("/user/"+e,{userId:e,token:t}).then((function(e){return a(e)})).catch((function(e){return n(e)}))}))})(D(e).userId).then((function(e){var t=e.data;t.error?(F({visible:!0,snackType:"error",snackMessage:t.error}),localStorage.removeItem("data"),I(Object(n.jsx)(d.c,{to:"/login"}))):v(t.user)})).catch((function(e){console.log(e),localStorage.removeItem("data"),I(Object(n.jsx)(d.c,{to:"/login"}))}))}),[]);var z=function(e){if(null!=O&&!l.loading){var t="teacher"===O.role;u({loading:!0,text:"".concat(t?"Creating":"Joininig"," classroom")}),t?function(e,t){var a=H();return new Promise((function(n,r){W.a.post("/create-classroom",{userId:e,token:a,className:t}).then((function(e){return n(e)})).catch((function(e){return r(e)}))}))}(O._id,e).then((function(e){var t=e.data;t.error?F({visible:!0,snackType:"error",snackMessage:t.error}):(F({visible:!0,snackType:"success",snackMessage:"Your classroom was successfully created!"}),v(t.user))})).catch((function(e){F({visible:!0,snackType:"error",snackMessage:e})})).finally((function(){u({loading:!1,text:""})})):function(e,t){var a=H();return new Promise((function(n,r){W.a.post("/join-classroom",{userId:e,token:a,classCode:t}).then((function(e){return n(e)})).catch((function(e){return r(e)}))}))}(O._id,e).then((function(e){var t=e.data;console.log(t),t.error?F({visible:!0,snackType:"error",snackMessage:t.error}):(F({visible:!0,snackType:"success",snackMessage:"Your were successfully added to the classroom!"}),v(t.user))})).catch((function(e){F({visible:!0,snackType:"error",snackMessage:e})})).finally((function(){u({loading:!1,text:""})}))}},R=null!=h&&(h.type===Ge||h.type===Ue);if(C)return C;if(null===O)return Object(n.jsx)("div",{children:"Loading your details..."});var U="teacher"===O.role;return Object(n.jsx)(T.a,{active:l.loading,spinner:!0,text:l.text,children:Object(n.jsxs)("div",{className:e.root,children:[Object(n.jsx)(x.a,{}),Object(n.jsx)(X.a,{position:"absolute",className:Object(Z.a)(e.appBar,c&&e.appBarShift),children:Object(n.jsxs)(K.a,{className:e.toolbar,children:[Object(n.jsx)(A.a,{edge:"start",color:"inherit","aria-label":"open drawer",onClick:function(){s(!0)},className:Object(Z.a)(e.menuButton,c&&e.menuButtonHidden),children:Object(n.jsx)(ae.a,{})}),Object(n.jsx)(w.a,{component:"h1",variant:"h6",color:"inherit",noWrap:!0,className:e.title,children:O.username+"("+O.role+")"}),Object(n.jsx)(A.a,{color:"inherit",onClick:function(e){null!=O&&function(e){return new Promise((function(t,a){W.a.post("/logout",{userId:e}).then((function(e){return t(e)})).catch((function(e){return a(e)}))}))}(O._id).then((function(e){var t=e.data;t.error?F({visible:!0,snackType:"error",snackMessage:t.error}):(localStorage.removeItem("data"),I(Object(n.jsx)(d.c,{to:"/login"})))})).catch((function(e){F({visible:!0,snackType:"error",snackMessage:e})}))},children:Object(n.jsx)(re.a,{})})]})}),Object(n.jsxs)($.a,{variant:"permanent",classes:{paper:Object(Z.a)(e.drawerPaper,!c&&e.drawerPaperClose)},open:c,children:[Object(n.jsxs)("div",{className:e.toolbarIcon,children:["Attendance Management",Object(n.jsx)(A.a,{onClick:function(){s(!1)},children:Object(n.jsx)(se.a,{})})]}),Object(n.jsx)(ee.a,{}),Object(n.jsx)(Q.a,{children:Object(n.jsxs)("div",{children:[Object(n.jsxs)(de.a,{button:!0,onClick:function(e){if(null!==O&&!l.loading){var t="teacher"===O.role;g(Object(n.jsx)(ve,{showSnackBar:_,isTeacher:t,onAddClassroom:z}))}},disabled:l.loading,children:[Object(n.jsx)(ue.a,{children:Object(n.jsx)(me.a,{})}),Object(n.jsx)(je.a,{primary:U?"New classroom":"Join classroom"})]}),Object(n.jsxs)(de.a,{button:!0,onClick:function(){if(null!==O&&!l.loading){u({loading:!0,text:"Please wait! I'm processing your request"});var e=h.props.classroomId;"teacher"===O.role?function(e,t){var a=H();return new Promise((function(n,r){W.a.post("/delete-classroom",{userId:e,token:a,classroomId:t}).then((function(e){return n(e)})).catch((function(e){return r(e)}))}))}(O._id,e).then((function(e){var t=e.data;t.error?F({visible:!0,snackType:"error",snackMessage:t.error}):(F({visible:!0,snackType:"success",snackMessage:"Your classroom with all records was successfully deleted!"}),v(t.user),g(null))})).catch((function(e){F({visible:!0,snackType:"error",snackMessage:e})})).finally((function(){u({loading:!1,text:""})})):function(e,t){var a=H();return new Promise((function(n,r){W.a.post("/leave-classroom",{userId:e,token:a,classroomId:t}).then((function(e){return n(e)})).catch((function(e){return r(e)}))}))}(O._id,e).then((function(e){var t=e.data;t.error?F({visible:!0,snackType:"error",snackMessage:t.error}):(F({visible:!0,snackType:"success",snackMessage:"You were successfully removed from the classroom!"}),v(t.user),g(null))})).catch((function(e){F({visible:!0,snackType:"error",snackMessage:e})})).finally((function(){u({loading:!1,text:""})}))}},disabled:l.loading||!R,children:[Object(n.jsx)(ue.a,{children:Object(n.jsx)(ge.a,{})}),Object(n.jsx)(je.a,{primary:U?"Delete Classroom":"Leave Classroom"})]}),Object(n.jsxs)(de.a,{button:!0,onClick:function(){for(var e="",t=document.querySelectorAll("#attendanceRecordTable tr"),a=0;a<t.length;++a){var n=t[a].children;if(0!==n.length&&""!==n[0].innerText){for(var r=n[0].innerText,c=1;c<n.length;++c){r+=", "+n[c].innerText}e+=r+"\n"}}var s=h.props.className,i="".concat(O.email,"-").concat(O.role,"-").concat(s,".csv"),o=document.createElement("a");o.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(e)),o.setAttribute("download",i),o.style.display="none",document.body.appendChild(o),o.click(),document.body.removeChild(o)},disabled:l.loading||!R,children:[Object(n.jsx)(ue.a,{children:Object(n.jsx)(pe.a,{})}),Object(n.jsx)(je.a,{primary:"Export Statistics"})]})]})}),Object(n.jsx)(ee.a,{}),Object(n.jsx)(Q.a,{children:Object(n.jsxs)("div",{children:[Object(n.jsx)(ie.a,{inset:!0,children:"Your classrooms"}),O.classrooms&&O.classrooms.map((function(e){return Object(n.jsxs)(de.a,{button:!0,disabled:l.loading,onClick:function(t){return function(e){if(null!==O&&!l.loading){var t=null;t="teacher"===O.role?Object(n.jsx)(Ge,{classroomId:e._id,loader:l,setLoader:u,setSnack:F,user:O,className:e.className}):Object(n.jsx)(Ue,{classroomId:e._id,loader:l,setLoader:u,setSnack:F,user:O,className:e.className}),g(t)}}(e)},children:[Object(n.jsx)(ue.a,{children:Object(n.jsx)(le.a,{})}),Object(n.jsx)(je.a,{primary:e.className})]},e._id)}))]})})]}),Object(n.jsxs)("main",{className:e.content,children:[Object(n.jsx)("div",{className:e.appBarSpacer}),Object(n.jsx)(S.a,{maxWidth:"lg",className:e.container,children:!h&&Object(n.jsxs)("p",{children:["Welcome ",O.username,"!",Object(n.jsx)("br",{}),"We are glad to see here.",Object(n.jsx)("br",{}),"Click on the left menu to get started!"]})}),h]}),Object(n.jsx)(xe.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:B.visible,autoHideDuration:6e3,onClose:E,children:Object(n.jsx)(M.a,{severity:B.snackType,action:Object(n.jsx)(A.a,{"aria-label":"close",color:"inherit",size:"small",onClick:E,children:Object(n.jsx)(L.a,{fontSize:"inherit"})}),children:String(B.snackMessage)})})]})})}var $e=a.p+"static/media/404.fa1a6217.gif";function Xe(){return Object(n.jsxs)("div",{id:"page404",style:{display:"flex",alignItems:"center",height:"100vh"},children:[Object(n.jsx)("div",{children:Object(n.jsx)("img",{src:$e,alt:"page-404",style:{width:"100%"}})}),Object(n.jsxs)("div",{style:{textAlign:"center"},children:[Object(n.jsx)("p",{children:"The page you are looking for does not exist!"}),Object(n.jsx)(m.a,{variant:"contained",color:"primary",href:"/",children:"Home"})]})]})}a(403);function Ke(){return null!=localStorage.getItem("data")}var Qe=function(e){var t=e.component,a=Object(l.a)(e,["component"]);return Object(n.jsx)(d.d,Object(o.a)(Object(o.a)({},a),{},{render:function(e){var r=Object(o.a)(Object(o.a)({},e),a);return Ke()?Object(n.jsx)(d.c,{to:{pathname:"/dashboard",state:{from:e.location}}}):Object(n.jsx)(t,Object(o.a)({},r))}}))},et=function(e){var t=e.component,a=Object(l.a)(e,["component"]);return Object(n.jsx)(d.d,Object(o.a)(Object(o.a)({},a),{},{render:function(e){var r=Object(o.a)(Object(o.a)({},e),a);return Ke()?Object(n.jsx)(t,Object(o.a)({},r)):Object(n.jsx)(d.c,{to:{pathname:"/login",state:{from:e.location}}})}}))};var tt=function(){return Object(n.jsx)("div",{id:"baseDiv",children:Object(n.jsx)(u.HashRouter,{basename:"/",children:Object(n.jsxs)(d.g,{children:[Object(n.jsx)(Qe,{exact:!0,path:"/",component:f}),Object(n.jsx)(Qe,{exact:!0,path:"/login",component:J,register:!1}),Object(n.jsx)(Qe,{exact:!0,path:"/register",component:J,register:!0}),Object(n.jsx)(Qe,{exact:!0,path:"/forgot-password",component:G,reset:!1}),Object(n.jsx)(Qe,{exact:!0,path:"/reset-password/:tokenId",component:G,reset:!0}),Object(n.jsx)(et,{exact:!0,path:"/dashboard",component:Ze}),Object(n.jsx)(d.d,{path:"/",component:Xe})]})})})};i.a.render(Object(n.jsx)(c.a.Fragment,{children:Object(n.jsx)(tt,{})}),document.getElementById("root"))}},[[404,1,2]]]);
//# sourceMappingURL=main.d82e0874.chunk.js.map