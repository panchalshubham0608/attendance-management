(this["webpackJsonpattendance-management"]=this["webpackJsonpattendance-management"]||[]).push([[0],{255:function(e,t,a){},289:function(e,t){},291:function(e,t){},302:function(e,t){},304:function(e,t){},331:function(e,t){},333:function(e,t){},334:function(e,t){},339:function(e,t){},341:function(e,t){},360:function(e,t){},372:function(e,t){},375:function(e,t){},403:function(e,t,a){},404:function(e,t,a){"use strict";a.r(t);var n=a(2),r=a(0),c=a.n(r),s=a(13),i=a.n(s),o=(a(255),a(26)),l=a(146),d=a(18),u=a(104),j=a(443),b=a(446),m=a.p+"static/media/brand.2d6d0d51.png",h=Object(j.a)((function(e){return{homepage:{userSelect:"none"},header:{textAlign:"center",color:"#2977c9"},content:{display:"flex",alignItems:"center"},leftFlexBox:{flex:.5,textAlign:"center",marginRight:"10px"},rightFlexBox:{flex:.5,textAlign:"left",marginLeft:"10px"},brandImage:{borderRadius:"50%",width:"200px",height:"200px"},button:{margin:"auto 10px"}}}));var g=function(e){var t=h();return Object(n.jsxs)("div",{className:t.homepage,children:[Object(n.jsx)("h1",{className:t.header,children:"Attendance Management System"}),Object(n.jsxs)("div",{className:t.content,children:[Object(n.jsx)("div",{className:t.leftFlexBox,children:Object(n.jsx)("img",{src:m,alt:"our-brand",className:t.brandImage})}),Object(n.jsxs)("div",{className:t.rightFlexBox,children:[Object(n.jsxs)("p",{children:["- One place to manage all your attendances! ",Object(n.jsx)("br",{}),"- Create and delete classrooms on-demand! ",Object(n.jsx)("br",{}),"- Collect attendance on-demand! ",Object(n.jsx)("br",{}),"- Maintain your attendance record with ease! ",Object(n.jsx)("br",{}),"- Export attendance-statistics of your classroom! ",Object(n.jsx)("br",{}),"- and many more features for free!"]}),Object(n.jsxs)("p",{children:["Sounds exciting? ",Object(n.jsx)("br",{}),"Click on the button below to get started!"]}),Object(n.jsx)(b.a,{className:t.button,variant:"contained",color:"primary",href:"/login",children:"Sign In"}),"OR",Object(n.jsx)(b.a,{className:t.button,variant:"contained",color:"primary",href:"/register",children:"Sign Up"})]})]})]})},f=a(15),p=a(482),x=a(449),O=a(479),v=a(457),y=a(459),k=a(458),w=a(84),S=a(448),C=a(476),P=a(483),I=a(454),N=a(76),T=a.n(N),M=a(475),A=a(451),B=a(450),F=a(56),_=a.n(F),W=a(22),L=a.n(W),E=a(112),z=a.n(E),D="e3483b2f6bc28d1f6c5253b1c8c860cbb7562341e75059c45108afdbe0fa92d0b152dc40ded35908921aa2e954f50830f157090b5a36319edef6901469f1afeb";L.a.defaults.baseURL="https://attendance-management-server.herokuapp.com";var R=function(e){return new Promise((function(t,a){L.a.get("/classroom/"+e).then((function(e){return t(e)})).catch((function(e){return a(e)}))}))},U=Object(j.a)((function(e){return{paper:{marginTop:e.spacing(0),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));function Y(e){var t=e.register,a=U(),c=Object(r.useState)("student"),s=Object(f.a)(c,2),i=s[0],l=s[1],u=Object(r.useState)({loading:!1,text:""}),j=Object(f.a)(u,2),h=j[0],g=j[1],N=Object(r.useState)(null),F=Object(f.a)(N,2),W=F[0],E=F[1],R=Object(r.useState)(null),Y=Object(f.a)(R,2),J=Y[0],q=Y[1],G=Object(r.useState)(null),H=Object(f.a)(G,2),V=H[0],Z=H[1];return V||Object(n.jsx)("div",{id:"authForm",children:Object(n.jsx)(T.a,{active:h.loading,spinner:!0,text:h.text,children:Object(n.jsxs)(S.a,{component:"main",maxWidth:"xs",children:[Object(n.jsx)(x.a,{}),Object(n.jsxs)("div",{className:a.paper,children:[Object(n.jsx)(p.a,{className:a.avatar,src:m}),Object(n.jsx)(w.a,{component:"h1",variant:"h5",children:t?"Sign Up":"Sign In"}),Object(n.jsxs)("form",{className:a.form,noValidate:!0,onSubmit:function(e){if(e.preventDefault(),!h.loading){var a=null;t&&(a=String(document.getElementById("username").value).toLowerCase().trim());var r=String(document.getElementById("email").value).toLowerCase().trim(),c=String(document.getElementById("password").value).toLowerCase().trim();if(null==a||""!==a)if(function(e){return/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())}(r))if(""!==c)if("student"===i||"teacher"===i)if(t)g({loading:!0,text:"Please wait! I'm setting up your account"}),function(e){return new Promise((function(t,a){L.a.post("/register",Object(o.a)({},e)).then((function(e){return t(e)})).catch((function(e){return a(e)}))}))}({username:a,email:r,password:c,role:i}).then((function(e){var t=e.data;t.error?E(t.error):q("Your registration was successful!")})).catch((function(e){E(e)})).finally((function(){g({loading:!1,text:""})}));else g({loading:!0,text:"Please wait! I'm validating your credentials."}),function(e){return new Promise((function(t,a){L.a.post("/login",Object(o.a)({},e)).then((function(e){return t(e)})).catch((function(e){return a(e)}))}))}({email:r,password:c,role:i}).then((function(e){var t,a=e.data;a.error?E(a.error):(localStorage.setItem("_auth",(t=a.user._id,z.a.AES.encrypt(JSON.stringify(t),D))),q("You are successfully logged in!"),Z(Object(n.jsx)(d.a,{to:"/dashboard"})))})).catch((function(e){E(e)})).finally((function(){g({loading:!1,text:""})}));else E("Please select your role!");else E("Please provide a valid password!");else E("Please provide a valid email!");else E("Please provide a valid username!")}},children:[Object(n.jsxs)(B.a,{in:Boolean(J||W),children:[J&&Object(n.jsxs)(M.a,{severity:"success",action:Object(n.jsx)(A.a,{"aria-label":"close",color:"inherit",size:"small",onClick:function(){q(null),E(null)},children:Object(n.jsx)(_.a,{fontSize:"inherit"})}),children:[" ",String(J)]}),W&&Object(n.jsxs)(M.a,{severity:"error",action:Object(n.jsx)(A.a,{"aria-label":"close",color:"inherit",size:"small",onClick:function(){q(null),E(null)},children:Object(n.jsx)(_.a,{fontSize:"inherit"})}),children:[" ",String(W)]})]}),t&&Object(n.jsx)(O.a,{variant:"outlined",margin:"normal",fullWidth:!0,id:"username",label:"Username",name:"username",autoComplete:"text",autoFocus:!0}),Object(n.jsx)(O.a,{variant:"outlined",margin:"normal",fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0}),Object(n.jsx)(O.a,{variant:"outlined",margin:"normal",fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password"}),Object(n.jsx)(I.a,{component:"fieldset",children:Object(n.jsxs)(P.a,{row:!0,"aria-label":"role",name:"role",value:i,onChange:function(e){return l(e.target.value)},children:[Object(n.jsx)(v.a,{value:"student",control:Object(n.jsx)(C.a,{}),label:"Student"}),Object(n.jsx)(v.a,{value:"teacher",control:Object(n.jsx)(C.a,{}),label:"Teacher"})]})}),Object(n.jsx)(b.a,{id:"submitButton",type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:a.submit,children:t?"Sign Up":"Sign In"}),Object(n.jsxs)(k.a,{container:!0,children:[Object(n.jsx)(k.a,{item:!0,xs:!0,children:!t&&Object(n.jsx)(y.a,{href:"/forgot-password",variant:"body2",children:"Forgot password?"})}),Object(n.jsx)(k.a,{item:!0,children:Object(n.jsx)(y.a,{href:t?"/login":"/register",variant:"body2",children:t?"Already have an account? Sign In":"Don't have an account? Sign Up"})})]}),Object(n.jsx)("div",{style:{height:"10px"}})]})]})]})})})}var J=Object(j.a)((function(e){return{paper:{marginTop:e.spacing(0),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));function q(e){var t=e.reset,a=J(),c=Object(r.useState)("student"),s=Object(f.a)(c,2),i=s[0],o=s[1],l=Object(r.useState)({loading:!1,text:""}),d=Object(f.a)(l,2),u=d[0],j=d[1],h=Object(r.useState)(null),g=Object(f.a)(h,2),N=g[0],F=g[1],W=Object(r.useState)(null),E=Object(f.a)(W,2),z=E[0],D=E[1];return Object(n.jsx)("div",{id:"forgotPasswordForm",children:Object(n.jsx)(T.a,{active:u.loading,spinner:!0,text:u.text,children:Object(n.jsxs)(S.a,{component:"main",maxWidth:"xs",children:[Object(n.jsx)(x.a,{}),Object(n.jsxs)("div",{className:a.paper,children:[Object(n.jsx)(p.a,{className:a.avatar,src:m}),Object(n.jsx)(w.a,{component:"h1",variant:"h5",children:t?"Reset Password":"Forgot Password"}),Object(n.jsxs)("form",{className:a.form,noValidate:!0,onSubmit:function(a){if(a.preventDefault(),!u.loading)if(t){var n=String(document.getElementById("password").value).trim();if(""===n)return void F("Please provide a valid password");var r=e.match.params.tokenId;j({loading:!0,text:"Please wait! I'm processing your request!"}),function(e,t){return new Promise((function(a,n){L.a.post("/reset-password",{tokenId:e,password:t}).then((function(e){return a(e)})).catch((function(e){return n(e)}))}))}(r,n).then((function(e){var t=e.data.error;t?F(t):D("Your password was successfully updated!")})).catch((function(e){F(e)})).finally((function(){j({loading:!1,text:""})}))}else{var c=document.getElementById("email").value;if(!function(e){return/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())}(c))return void F("Please provide a valid email!");j({loading:!0,text:"Please wait! I'm processing your request!"}),function(e,t){return new Promise((function(a,n){L.a.post("/forgot-password",{email:e,role:t}).then((function(e){return a(e)})).catch((function(e){return n(e)}))}))}(c,i).then((function(e){var t=e.data.error;t?F(t):D("An email has been sent to your email-address!")})).catch((function(e){F(e)})).finally((function(){j({loading:!1,text:""})}))}},children:[Object(n.jsxs)(B.a,{in:Boolean(z||N),children:[z&&Object(n.jsxs)(M.a,{severity:"success",action:Object(n.jsx)(A.a,{"aria-label":"close",color:"inherit",size:"small",onClick:function(){D(null),F(null)},children:Object(n.jsx)(_.a,{fontSize:"inherit"})}),children:[" ",String(z)]}),N&&Object(n.jsxs)(M.a,{severity:"error",action:Object(n.jsx)(A.a,{"aria-label":"close",color:"inherit",size:"small",onClick:function(){D(null),F(null)},children:Object(n.jsx)(_.a,{fontSize:"inherit"})}),children:[" ",String(N)]})]}),t&&Object(n.jsx)(O.a,{variant:"outlined",margin:"normal",fullWidth:!0,id:"password",label:"New Password",name:"password",type:"password",autoComplete:"password",autoFocus:!0}),!t&&Object(n.jsxs)("div",{children:[Object(n.jsx)(O.a,{variant:"outlined",margin:"normal",fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0}),Object(n.jsx)(I.a,{component:"fieldset",children:Object(n.jsxs)(P.a,{row:!0,"aria-label":"role",name:"role",value:i,onChange:function(e){return o(e.target.value)},children:[Object(n.jsx)(v.a,{value:"student",control:Object(n.jsx)(C.a,{}),label:"Student"}),Object(n.jsx)(v.a,{value:"teacher",control:Object(n.jsx)(C.a,{}),label:"Teacher"})]})})]}),Object(n.jsx)(b.a,{id:"submitButton",type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:a.submit,children:"Submit"}),!t&&Object(n.jsxs)(k.a,{container:!0,children:[Object(n.jsx)(k.a,{item:!0,xs:!0,children:Object(n.jsx)(y.a,{href:"/login",variant:"body2",children:"Go to Sign In"})}),Object(n.jsx)(k.a,{item:!0,xs:!0,children:Object(n.jsx)(y.a,{href:"/login",variant:"body2",children:"Go to Sign Up"})})]})]})]})]})})})}var G=a(105),H=a(4),V=a(480),Z=a(469),$=a(468),X=a(456),K=a(470),Q=a(219),ee=a.n(Q),te=a(220),ae=a.n(te),ne=a(221),re=a.n(ne),ce=a(473),se=a(225),ie=a.n(se),oe=a(467),le=a(471),de=a(472),ue=a(222),je=a.n(ue),be=a(223),me=a.n(be),he=a(224),ge=a.n(he),fe=a(481),pe=Object(j.a)((function(e){return{paper:{marginTop:e.spacing(0),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));function xe(e){var t=e.showSnackBar,a=e.onAddClassroom,r=e.role,c=pe(),s="teacher"===r,i=s?"classname":"classcode";return Object(n.jsx)("div",{id:"addClassroomForm",children:Object(n.jsxs)(S.a,{component:"main",maxWidth:"xs",children:[Object(n.jsx)(x.a,{}),Object(n.jsxs)("div",{className:c.paper,children:[Object(n.jsx)(p.a,{className:c.avatar,src:m}),Object(n.jsxs)(w.a,{component:"h1",variant:"h5",children:[s?"Create":"Join"," Classroom"]}),Object(n.jsxs)("form",{className:c.form,noValidate:!0,onSubmit:function(e){e.preventDefault();var n=String(document.getElementById(i).value).trim();0!==n.length?a(n):t("error","Please provide a valid classname")},autoComplete:"off",children:[Object(n.jsx)(O.a,{variant:"outlined",margin:"normal",fullWidth:!0,id:i,label:i,name:i,autoComplete:"off",autoFocus:!0}),Object(n.jsx)(b.a,{id:"submitButton",type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:c.submit,children:s?"Create":"Join"})]})]})]})})}var Oe=a(24),ve=a(462),ye=a(463),ke=a(465),we=a(461),Se=a(466),Ce=a(478),Pe=a(464),Ie=a(405),Ne=a(81),Te=a.n(Ne),Me=a(83),Ae=a.n(Me),Be=a(82),Fe=a.n(Be),_e=a(80),We=a.n(_e),Le=a(460),Ee=Object(j.a)((function(e){return{root:{flexShrink:0,marginLeft:e.spacing(2.5)}}}));function ze(e){var t=Ee(),a=Object(Oe.a)(),r=e.count,c=e.page,s=e.rowsPerPage,i=e.onChangePage;return Object(n.jsxs)("div",{className:t.root,children:[Object(n.jsx)(A.a,{onClick:function(e){i(e,0)},disabled:0===c,"aria-label":"first page",children:"rtl"===a.direction?Object(n.jsx)(We.a,{}):Object(n.jsx)(Te.a,{})}),Object(n.jsx)(A.a,{onClick:function(e){i(e,c-1)},disabled:0===c,"aria-label":"previous page",children:"rtl"===a.direction?Object(n.jsx)(Fe.a,{}):Object(n.jsx)(Ae.a,{})}),Object(n.jsx)(A.a,{onClick:function(e){i(e,c+1)},disabled:c>=Math.ceil(r/s)-1,"aria-label":"next page",children:"rtl"===a.direction?Object(n.jsx)(Ae.a,{}):Object(n.jsx)(Fe.a,{})}),Object(n.jsx)(A.a,{onClick:function(e){i(e,Math.max(0,Math.ceil(r/s)-1))},disabled:c>=Math.ceil(r/s)-1,"aria-label":"last page",children:"rtl"===a.direction?Object(n.jsx)(Te.a,{}):Object(n.jsx)(We.a,{})})]})}var De=Object(j.a)((function(e){return{paper:{marginTop:e.spacing(0),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)},classroomPage:{padding:"10px",width:"80%",margin:"10px auto"},root:{flexShrink:0,marginLeft:e.spacing(2.5)},table:{minWidth:500}}}));function Re(e){for(var t=e.user,a=e.classroomId,s=e.setLoader,i=e.setSnack,o=De(),l=Object(r.useState)(null),d=Object(f.a)(l,2),u=d[0],j=d[1],m=Object(r.useState)([]),h=Object(f.a)(m,2),g=h[0],p=h[1],x=Object(r.useState)("Loading details of the classroom!"),O=Object(f.a)(x,2),v=O[0],y=O[1],k=[],w=0;w<g.length;++w){var S=g[w],C=S.attendanceId,P=null;P=-1===S.students.indexOf(t.email)?Object(n.jsx)(Le.a,{color:"secondary",badgeContent:"Absent"}):Object(n.jsx)(Le.a,{color:"primary",badgeContent:"Present"}),k.push({key:C,value:P})}var I=c.a.useState(0),N=Object(f.a)(I,2),T=N[0],M=N[1],A=c.a.useState(5),B=Object(f.a)(A,2),F=B[0],_=B[1],W=F-Math.min(F,k.length-T*F);Object(r.useEffect)((function(){s({loading:!0,text:"Please wait! I'm fetching details for this classroom"}),R(a).then((function(e){var t=e.data;t.error?(y("Failed to load details of this classroom!"),i({visible:!0,snackType:"error",snackMessage:t.error})):(j(t.classroom),p(t.records))})).catch((function(e){i({visible:!0,snackType:"error",snackMessage:e})})).finally((function(){s({loading:!1,text:""})}))}),[a,s,i]);for(var E=!1,z=0;z<g.length;++z)if(g[z].attendanceId===u.collectingFor){E=-1===g[z].students.indexOf(t.email);break}return null===u?Object(n.jsx)("div",{id:"classroomPage",className:o.classroomPage,children:v}):Object(n.jsxs)("div",{id:"classroomPage",className:o.classroomPage,children:[Object(n.jsxs)("div",{style:{textAlign:"center"},children:[Object(n.jsx)("strong",{children:"Classroom Name: "}),u.className]}),Object(n.jsxs)("div",{style:{textAlign:"center"},children:[Object(n.jsx)("strong",{children:"Classroom Code: "}),u.code]}),u.collectingFor&&E&&Object(n.jsxs)(b.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:o.submit,onClick:function(){s({loading:!0,text:"Please wait! I'm marking your attendance!"}),function(e,t){return new Promise((function(a,n){L.a.post("/mark-attendance",{userId:e,classroomId:t}).then((function(e){return a(e)})).catch((function(e){return n(e)}))}))}(t._id,u._id).then((function(e){var t=e.data;t.error?i({visible:!0,snackType:"error",snackMessage:t.error}):(j(t.classroom),p(t.records))})).catch((function(e){i({visible:!0,snackType:"error",snackMessage:e})})).finally((function(){s({loading:!1,text:""})}))},children:["Mark attedance for ",u.collectingFor]}),Object(n.jsxs)("div",{style:{textAlign:"center"},children:[Object(n.jsx)("br",{}),"Your attendance record for this classroom!"]}),Object(n.jsx)(we.a,{component:Ie.a,children:Object(n.jsx)(ve.a,{className:o.table,"aria-label":"custom pagination table",id:"attendanceRecordTable",children:Object(n.jsxs)(ye.a,{children:[(F>0?k.slice(T*F,T*F+F):k).map((function(e){return Object(n.jsxs)(Pe.a,{children:[Object(n.jsx)(ke.a,{component:"th",scope:"row",children:e.key}),Object(n.jsx)(ke.a,{align:"left",children:e.value})]},e.key)})),W>0&&Object(n.jsx)(Pe.a,{style:{height:53*W},children:Object(n.jsx)(ke.a,{colSpan:6})})]})})}),Object(n.jsx)(we.a,{children:Object(n.jsx)(ve.a,{children:Object(n.jsx)(Se.a,{children:Object(n.jsx)(Pe.a,{children:Object(n.jsx)(Ce.a,{rowsPerPageOptions:[5,10,25,{label:"All",value:-1}],colSpan:3,count:k.length,rowsPerPage:F,page:T,SelectProps:{inputProps:{"aria-label":"rows per page"},native:!0},onChangePage:function(e,t){M(t)},onChangeRowsPerPage:function(e){_(parseInt(e.target.value,10)),M(0)},ActionsComponent:ze})})})})})]})}var Ue=Object(j.a)((function(e){return{root:{flexShrink:0,marginLeft:e.spacing(2.5)}}}));function Ye(e){var t=Ue(),a=Object(Oe.a)(),r=e.count,c=e.page,s=e.rowsPerPage,i=e.onChangePage;return Object(n.jsxs)("div",{className:t.root,children:[Object(n.jsx)(A.a,{onClick:function(e){i(e,0)},disabled:0===c,"aria-label":"first page",children:"rtl"===a.direction?Object(n.jsx)(We.a,{}):Object(n.jsx)(Te.a,{})}),Object(n.jsx)(A.a,{onClick:function(e){i(e,c-1)},disabled:0===c,"aria-label":"previous page",children:"rtl"===a.direction?Object(n.jsx)(Fe.a,{}):Object(n.jsx)(Ae.a,{})}),Object(n.jsx)(A.a,{onClick:function(e){i(e,c+1)},disabled:c>=Math.ceil(r/s)-1,"aria-label":"next page",children:"rtl"===a.direction?Object(n.jsx)(Ae.a,{}):Object(n.jsx)(Fe.a,{})}),Object(n.jsx)(A.a,{onClick:function(e){i(e,Math.max(0,Math.ceil(r/s)-1))},disabled:c>=Math.ceil(r/s)-1,"aria-label":"last page",children:"rtl"===a.direction?Object(n.jsx)(Te.a,{}):Object(n.jsx)(We.a,{})})]})}var Je=Object(j.a)((function(e){return{paper:{marginTop:e.spacing(0),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)},classroomPage:{padding:"10px",width:"80%",margin:"10px auto"},root:{flexShrink:0,marginLeft:e.spacing(2.5)},table:{minWidth:500}}}));function qe(e){var t=e.classroomId,a=e.loader,s=e.setLoader,i=e.setSnack,o=Je(),l=Object(r.useState)(null),d=Object(f.a)(l,2),u=d[0],j=d[1],m=Object(r.useState)([]),h=Object(f.a)(m,2),g=h[0],p=h[1],x=Object(r.useState)("Loading details of the classroom!"),v=Object(f.a)(x,2),y=v[0],k=v[1],w=function(e,t){for(var a={backgroundColor:"#cff4fc",color:"#055160",padding:"5px",borderRadius:"5px"},r={backgroundColor:"#f8d7da",color:"#842029",padding:"5px",borderRadius:"5px"},c=[],s=["studentId"],i=0;i<t.length;++i)s.push(t[i].attendanceId);for(var o=[],l=0;l<s.length;++l)o.push(Object(n.jsx)(ke.a,{align:"left",children:Object(n.jsx)("strong",{children:s[l].toUpperCase()})},"head".concat(l)));if(c.push({key:"row_0",value:o}),null===e)return c;for(var d=e.studentOnce,u=0;u<d.length;++u){var j=d[u],b=[];b.push(Object(n.jsx)(ke.a,{align:"left",children:j},"cel_".concat(u,"_0")));for(var m=0;m<t.length;++m){var h=null;h=-1!==t[m].students.indexOf(j)?Object(n.jsx)("span",{style:a,children:"Present"}):Object(n.jsx)("span",{style:r,children:"Absent"}),b.push(Object(n.jsx)(ke.a,{align:"left",children:h},"cell_".concat(u,"_").concat(m+1)))}c.push({key:"row_".concat(u+1),value:b})}return c}(u,g),S=c.a.useState(0),C=Object(f.a)(S,2),P=C[0],I=C[1],N=c.a.useState(5),T=Object(f.a)(N,2),M=T[0],A=T[1],B=M-Math.min(M,w.length-P*M);Object(r.useEffect)((function(){s({loading:!0,text:"Please wait! I'm fetching details for this classroom"}),R(t).then((function(e){var t=e.data;t.error?(k("Failed to load details of this classroom!"),i({visible:!0,snackType:"error",snackMessage:t.error})):(j(t.classroom),p(t.records))})).catch((function(e){i({visible:!0,snackType:"error",snackMessage:e})})).finally((function(){s({loading:!1,text:""})}))}),[t,s,i]);return null===u?Object(n.jsx)("div",{id:"classroomPage",className:o.classroomPage,children:y}):Object(n.jsxs)("div",{id:"classroomPage",className:o.classroomPage,children:[Object(n.jsxs)("div",{style:{textAlign:"center"},children:[Object(n.jsx)("strong",{children:"Classroom Name: "}),u.className]}),Object(n.jsxs)("div",{style:{textAlign:"center"},children:[Object(n.jsx)("strong",{children:"Classroom Code: "}),u.code]}),u.collectingFor?Object(n.jsxs)(b.a,{type:"submit",fullWidth:!0,variant:"contained",color:"secondary",className:o.submit,onClick:function(e){if(!a.loading){var t=u._id,n=u.collectingFor;s({loading:!0,text:"Please wait! I'm processing your request"}),function(e,t){return new Promise((function(a,n){L.a.post("/stop-collecting",{classroomId:e,attendanceId:t}).then((function(e){return a(e)})).catch((function(e){return n(e)}))}))}(t,n).then((function(e){var t=e.data;t.error?i({visible:!0,snackType:"error",snackMessage:t.error}):(j(t.classroom),p(t.records))})).catch((function(e){i({visible:!0,snackType:"error",snackMessage:e})})).finally((function(){s({loading:!1,text:""})}))}},children:["Stop collecting attedance for ",u.collectingFor]}):Object(n.jsxs)("form",{className:o.form,noValidate:!0,onSubmit:function(e){if(e.preventDefault(),!a.loading){var t=String(document.getElementById("attendanceId").value).trim();""!==t?(s({loading:!0,text:"Please wait! I'm processing your request"}),function(e,t){return new Promise((function(a,n){L.a.post("/collect-attendance",{classroomId:e,attendanceId:t}).then((function(e){return a(e)})).catch((function(e){return n(e)}))}))}(u._id,t).then((function(e){var t=e.data;t.error?i({visible:!0,snackType:"error",snackMessage:t.error}):(j(t.classroom),p(t.records))})).catch((function(e){i({visible:!0,snackType:"error",snackMessage:e})})).finally((function(){s({loading:!1,text:""})}))):i({visible:!0,snackType:"error",snackMessage:"Please provide a valid attendanceId"})}},children:[Object(n.jsx)(O.a,{variant:"outlined",margin:"normal",fullWidth:!0,id:"attendanceId",label:"Attendance ID",name:"attendanceId",autoComplete:"text",autoFocus:!0}),Object(n.jsx)(b.a,{id:"submitButton",type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:o.submit,children:"Collect attendance"})]}),Object(n.jsxs)("div",{style:{textAlign:"center"},children:[Object(n.jsx)("br",{}),"Your attendance record for this classroom!"]}),Object(n.jsx)(we.a,{component:Ie.a,children:Object(n.jsx)(ve.a,{className:o.table,"aria-label":"custom pagination table",id:"attendanceRecordTable",children:Object(n.jsxs)(ye.a,{children:[(M>0?w.slice(P*M,P*M+M):w).map((function(e){return Object(n.jsx)(Pe.a,{children:e.value},e.key)})),B>0&&Object(n.jsx)(Pe.a,{style:{height:53*B},children:Object(n.jsx)(ke.a,{colSpan:6})})]})})}),Object(n.jsx)(we.a,{children:Object(n.jsx)(ve.a,{children:Object(n.jsx)(Se.a,{children:Object(n.jsx)(Pe.a,{children:Object(n.jsx)(Ce.a,{rowsPerPageOptions:[5,10,25,{label:"All",value:-1}],colSpan:3,count:w.length,rowsPerPage:M,page:P,SelectProps:{inputProps:{"aria-label":"rows per page"},native:!0},onChangePage:function(e,t){I(t)},onChangeRowsPerPage:function(e){A(parseInt(e.target.value,10)),I(0)},ActionsComponent:Ye})})})})})]})}var Ge=Object(j.a)((function(e){return{root:{display:"flex"},toolbar:{paddingRight:24},toolbarIcon:Object(o.a)({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:"0 8px"},e.mixins.toolbar),appBar:{zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{marginLeft:240,width:"calc(100% - ".concat(240,"px)"),transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},menuButton:{marginRight:36},menuButtonHidden:{display:"none"},title:{flexGrow:1},drawerPaper:{position:"relative",whiteSpace:"nowrap",width:240,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},drawerPaperClose:Object(G.a)({overflowX:"hidden",transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),width:e.spacing(7)},e.breakpoints.up("sm"),{width:e.spacing(9)}),appBarSpacer:e.mixins.toolbar,content:{flexGrow:1,height:"100vh",overflow:"auto"},container:{paddingTop:e.spacing(4),paddingBottom:e.spacing(4)},paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"},fixedHeight:{height:240}}}));function He(){var e=Ge(),t=Object(r.useState)(!0),a=Object(f.a)(t,2),c=a[0],s=a[1],i=Object(r.useState)({loading:!1,text:""}),o=Object(f.a)(i,2),l=o[0],u=o[1],j=Object(r.useState)(null),b=Object(f.a)(j,2),m=b[0],h=b[1],g=Object(r.useState)(null),p=Object(f.a)(g,2),O=p[0],v=p[1],y=Object(r.useState)(null),k=Object(f.a)(y,2),C=k[0],P=k[1],I=Object(r.useState)({visible:!1,snackType:"success",snackMessage:""}),N=Object(f.a)(I,2),B=N[0],F=N[1],W=function(e,t){F({visible:!0,snackType:e,snackMessage:t})},E=function(e){F({visible:!1,snackType:"success",snackMessage:""})};Object(r.useEffect)((function(){(function(e){return new Promise((function(t,a){L.a.get("/user/"+e).then((function(e){return t(e)})).catch((function(e){return a(e)}))}))})(function(e){var t=z.a.AES.decrypt(e,D);return JSON.parse(t.toString(z.a.enc.Utf8))}(localStorage.getItem("_auth"))).then((function(e){var t=e.data;t.error?(console.log(t.error),F({visible:!0,snackType:"error"}),localStorage.removeItem("_auth"),P(Object(n.jsx)(d.a,{to:"/login"}))):v(t.user)})).catch((function(e){console.log(e),localStorage.removeItem("_auth"),P(Object(n.jsx)(d.a,{to:"/login"}))}))}),[]);var R=function(e){if(null!=O&&!l.loading){var t,a,n,r,c="teacher"===O.role;u({loading:!0,text:"".concat(c?"Creating":"Joininig"," classroom")}),c?(n=O._id,r=e,new Promise((function(e,t){L.a.post("/create-classroom",{userId:n,className:r}).then((function(t){return e(t)})).catch((function(e){return t(e)}))}))).then((function(e){var t=e.data;t.error?F({visible:!0,snackType:"error",snackMessage:t.error}):(F({visible:!0,snackType:"success",snackMessage:"Your classroom was successfully created!"}),v(t.user))})).catch((function(e){F({visible:!0,snackType:"error",snackMessage:e})})).finally((function(){u({loading:!1,text:""})})):(t=O.email,a=e,new Promise((function(e,n){L.a.post("/join-classroom",{useremail:t,classCode:a}).then((function(t){return e(t)})).catch((function(e){return n(e)}))}))).then((function(e){var t=e.data;console.log(t),t.error?F({visible:!0,snackType:"error",snackMessage:t.error}):(F({visible:!0,snackType:"success",snackMessage:"Your were successfully added to the classroom!"}),v(t.user))})).catch((function(e){F({visible:!0,snackType:"error",snackMessage:e})})).finally((function(){u({loading:!1,text:""})}))}},U=null!=m&&(m.type===qe||m.type===Re);if(C)return C;if(null===O)return Object(n.jsx)("div",{children:"Loading your details..."});var Y="teacher"===O.role;return Object(n.jsx)(T.a,{active:l.loading,spinner:!0,text:l.text,children:Object(n.jsxs)("div",{className:e.root,children:[Object(n.jsx)(x.a,{}),Object(n.jsx)(Z.a,{position:"absolute",className:Object(H.a)(e.appBar,c&&e.appBarShift),children:Object(n.jsxs)($.a,{className:e.toolbar,children:[Object(n.jsx)(A.a,{edge:"start",color:"inherit","aria-label":"open drawer",onClick:function(){s(!0)},className:Object(H.a)(e.menuButton,c&&e.menuButtonHidden),children:Object(n.jsx)(ee.a,{})}),Object(n.jsx)(w.a,{component:"h1",variant:"h6",color:"inherit",noWrap:!0,className:e.title,children:O.username+"("+O.role+")"}),Object(n.jsx)(A.a,{color:"inherit",onClick:function(e){null!=O&&function(e){return new Promise((function(t,a){L.a.post("/logout",{userId:e}).then((function(e){return t(e)})).catch((function(e){return a(e)}))}))}(O._id).then((function(e){var t=e.data;t.error?F({visible:!0,snackType:"error",snackMessage:t.error}):(localStorage.removeItem("_auth"),P(Object(n.jsx)(d.a,{to:"/login"})))})).catch((function(e){F({visible:!0,snackType:"error",snackMessage:e})}))},children:Object(n.jsx)(ae.a,{})})]})}),Object(n.jsxs)(V.a,{variant:"permanent",classes:{paper:Object(H.a)(e.drawerPaper,!c&&e.drawerPaperClose)},open:c,children:[Object(n.jsxs)("div",{className:e.toolbarIcon,children:["Attendance Management",Object(n.jsx)(A.a,{onClick:function(){s(!1)},children:Object(n.jsx)(re.a,{})})]}),Object(n.jsx)(K.a,{}),Object(n.jsx)(X.a,{children:Object(n.jsxs)("div",{children:[Object(n.jsxs)(oe.a,{button:!0,onClick:function(e){var t=Object(n.jsx)(xe,{showSnackBar:W,onAddClassroom:R,role:null!=O?O.role:"teacher"});h(t)},disabled:l.loading,children:[Object(n.jsx)(le.a,{children:Object(n.jsx)(je.a,{})}),Object(n.jsx)(de.a,{primary:Y?"New classroom":"Join classroom"})]}),Object(n.jsxs)(oe.a,{button:!0,onClick:function(){if(null!==O&&!l.loading){u({loading:!0,text:"Please wait! I'm processing your request"});var e=m.props.classroomId;"teacher"===O.role?function(e){return new Promise((function(t,a){L.a.post("/delete-classroom",{classroomId:e}).then((function(e){return t(e)})).catch((function(e){return a(e)}))}))}(e).then((function(e){var t=e.data;t.error?F({visible:!0,snackType:"error",snackMessage:t.error}):(F({visible:!0,snackType:"success",snackMessage:"Your classroom with all records was successfully deleted!"}),v(t.user),h(null))})).catch((function(e){F({visible:!0,snackType:"error",snackMessage:e})})).finally((function(){u({loading:!1,text:""})})):function(e,t){return new Promise((function(a,n){L.a.post("/leave-classroom",{userEmail:e,classroomId:t}).then((function(e){return a(e)})).catch((function(e){return n(e)}))}))}(O.email,e).then((function(e){var t=e.data;t.error?F({visible:!0,snackType:"error",snackMessage:t.error}):(F({visible:!0,snackType:"success",snackMessage:"You were successfully removed from the classroom!"}),v(t.user),h(null))})).catch((function(e){F({visible:!0,snackType:"error",snackMessage:e})})).finally((function(){u({loading:!1,text:""})}))}},disabled:l.loading||!U,children:[Object(n.jsx)(le.a,{children:Object(n.jsx)(me.a,{})}),Object(n.jsx)(de.a,{primary:Y?"Delete Classroom":"Leave Classroom"})]}),Object(n.jsxs)(oe.a,{button:!0,onClick:function(){for(var e="",t=document.querySelectorAll("#attendanceRecordTable tr"),a=0;a<t.length;++a){var n=t[a].children;if(0!==n.length&&""!==n[0].innerText){for(var r=n[0].innerText,c=1;c<n.length;++c){r+=", "+n[c].innerText}e+=r+"\n"}}var s=m.props.className,i="".concat(O.email,"-").concat(O.role,"-").concat(s,".csv"),o=document.createElement("a");o.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(e)),o.setAttribute("download",i),o.style.display="none",document.body.appendChild(o),o.click(),document.body.removeChild(o)},disabled:l.loading||!U,children:[Object(n.jsx)(le.a,{children:Object(n.jsx)(ge.a,{})}),Object(n.jsx)(de.a,{primary:"Export Statistics"})]})]})}),Object(n.jsx)(K.a,{}),Object(n.jsx)(X.a,{children:Object(n.jsxs)("div",{children:[Object(n.jsx)(ce.a,{inset:!0,children:"Your classrooms"}),O.classrooms&&O.classrooms.map((function(e){return Object(n.jsxs)(oe.a,{button:!0,disabled:l.loading,onClick:function(t){return function(e){if(null!==O&&!l.loading){var t=null;t="teacher"===O.role?Object(n.jsx)(qe,{classroomId:e._id,loader:l,setLoader:u,setSnack:F,user:O,className:e.className}):Object(n.jsx)(Re,{classroomId:e._id,loader:l,setLoader:u,setSnack:F,user:O,className:e.className}),h(t)}}(e)},children:[Object(n.jsx)(le.a,{children:Object(n.jsx)(ie.a,{})}),Object(n.jsx)(de.a,{primary:e.className})]},e._id)}))]})})]}),Object(n.jsxs)("main",{className:e.content,children:[Object(n.jsx)("div",{className:e.appBarSpacer}),Object(n.jsx)(S.a,{maxWidth:"lg",className:e.container,children:!m&&Object(n.jsxs)("p",{children:["Welcome ",O.username,"!",Object(n.jsx)("br",{}),"We are glad to see here.",Object(n.jsx)("br",{}),"Click on the left menu to get started!"]})}),m]}),Object(n.jsx)(fe.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:B.visible,autoHideDuration:6e3,onClose:E,children:Object(n.jsx)(M.a,{severity:B.snackType,action:Object(n.jsx)(A.a,{"aria-label":"close",color:"inherit",size:"small",onClick:E,children:Object(n.jsx)(_.a,{fontSize:"inherit"})}),children:String(B.snackMessage)})})]})})}a(403);var Ve=function(e){var t=e.component,a=Object(l.a)(e,["component"]);return Object(n.jsx)(d.b,Object(o.a)(Object(o.a)({},a),{},{render:function(e){var r=Object(o.a)(Object(o.a)({},e),a);return null==localStorage.getItem("_auth")?Object(n.jsx)(t,Object(o.a)({},r)):Object(n.jsx)(d.a,{to:{pathname:"/dashboard",state:{from:e.location}}})}}))},Ze=function(e){var t=e.component,a=Object(l.a)(e,["component"]);return Object(n.jsx)(d.b,Object(o.a)(Object(o.a)({},a),{},{render:function(e){var r=Object(o.a)(Object(o.a)({},e),a);return null!=localStorage.getItem("_auth")?Object(n.jsx)(t,Object(o.a)({},r)):Object(n.jsx)(d.a,{to:{pathname:"/login",state:{from:e.location}}})}}))};var $e=function(){return Object(n.jsx)("div",{id:"baseDiv",children:Object(n.jsx)(u.a,{children:Object(n.jsxs)(d.d,{children:[Object(n.jsx)(Ve,{exact:!0,path:"/",component:g}),Object(n.jsx)(Ve,{exact:!0,path:"/login",component:Y,register:!1}),Object(n.jsx)(Ve,{exact:!0,path:"/register",component:Y,register:!0}),Object(n.jsx)(Ve,{exact:!0,path:"/forgot-password",component:q,reset:!1}),Object(n.jsx)(Ve,{exact:!0,path:"/reset-password/:tokenId",component:q,reset:!0}),Object(n.jsx)(Ze,{exact:!0,path:"/dashboard",component:He})]})})})};i.a.render(Object(n.jsx)(c.a.Fragment,{children:Object(n.jsx)($e,{})}),document.getElementById("root"))}},[[404,1,2]]]);
//# sourceMappingURL=main.cb144b34.chunk.js.map